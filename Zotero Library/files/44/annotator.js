!function t(e,n,r){var o="function"==typeof hypothesisRequire&&hypothesisRequire;function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof hypothesisRequire&&hypothesisRequire;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){var n=e[s][1][t];return i(n||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(t){return!0}e.exports=function(t,e){var n=[];e=e||r;do{n.push(t),t=t.parentNode}while(t&&t.tagName&&e(t));return n.slice(1)}},{}],2:[function(t,e,n){(function(t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var i=typeof o;if("string"===i||"number"===i)t.push(o);else if(Array.isArray(o)&&o.length){var s=r.apply(null,o);s&&t.push(s)}else if("object"===i)for(var a in o)n.call(o,a)&&o[a]&&t.push(a)}}return t.join(" ")}void 0!==e&&e.exports?(r.default=r,e.exports=r):"function"==typeof t&&"object"==typeof t.amd&&t.amd?t("classnames",[],(function(){return r})):window.classNames=r}()}).call(this,void 0)},{}],3:[function(t,e,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,window)},{}],4:[function(t,e,n){function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}r.Diff,r.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var i=n,s=this.diff_commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var u=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var l=this.diff_compute_(t,e,i,o);return a&&l.unshift([0,a]),u&&l.push([0,u]),this.diff_cleanupMerge(l),l},r.prototype.diff_compute_=function(t,e,n,r){var o;if(!t)return[[1,e]];if(!e)return[[-1,t]];var i=t.length>e.length?t:e,s=t.length>e.length?e:t,a=i.indexOf(s);if(-1!=a)return o=[[1,i.substring(0,a)],[0,s],[1,i.substring(a+s.length)]],t.length>e.length&&(o[0][0]=o[2][0]=-1),o;if(1==s.length)return[[-1,t],[1,e]];var u=this.diff_halfMatch_(t,e);if(u){var l=u[0],c=u[1],f=u[2],h=u[3],d=u[4],p=this.diff_main(l,f,n,r),g=this.diff_main(c,h,n,r);return p.concat([[0,d]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},r.prototype.diff_lineMode_=function(t,e,n){t=(c=this.diff_linesToChars_(t,e)).chars1,e=c.chars2;var r=c.lineArray,o=this.diff_main(t,e,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([0,""]);for(var i=0,s=0,a=0,u="",l="";i<o.length;){switch(o[i][0]){case 1:a++,l+=o[i][1];break;case-1:s++,u+=o[i][1];break;case 0:if(s>=1&&a>=1){o.splice(i-s-a,s+a),i=i-s-a;for(var c,f=(c=this.diff_main(u,l,!1,n)).length-1;f>=0;f--)o.splice(i,0,c[f]);i+=c.length}a=0,s=0,u="",l=""}i++}return o.pop(),o},r.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,o=e.length,i=Math.ceil((r+o)/2),s=i,a=2*i,u=new Array(a),l=new Array(a),c=0;c<a;c++)u[c]=-1,l[c]=-1;u[s+1]=0,l[s+1]=0;for(var f=r-o,h=f%2!=0,d=0,p=0,g=0,v=0,m=0;m<i&&!((new Date).getTime()>n);m++){for(var y=-m+d;y<=m-p;y+=2){for(var _=s+y,b=(T=y==-m||y!=m&&u[_-1]<u[_+1]?u[_+1]:u[_-1]+1)-y;T<r&&b<o&&t.charAt(T)==e.charAt(b);)T++,b++;if(u[_]=T,T>r)p+=2;else if(b>o)d+=2;else if(h&&(x=s+f-y)>=0&&x<a&&-1!=l[x]&&T>=(E=r-l[x]))return this.diff_bisectSplit_(t,e,T,b,n)}for(var w=-m+g;w<=m-v;w+=2){for(var E,x=s+w,S=(E=w==-m||w!=m&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1)-w;E<r&&S<o&&t.charAt(r-E-1)==e.charAt(o-S-1);)E++,S++;if(l[x]=E,E>r)v+=2;else if(S>o)g+=2;else if(!h){var T;if((_=s+f-w)>=0&&_<a&&-1!=u[_])if(b=s+(T=u[_])-_,T>=(E=r-E))return this.diff_bisectSplit_(t,e,T,b,n)}}}return[[-1,t],[1,e]]},r.prototype.diff_bisectSplit_=function(t,e,n,r,o){var i=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),u=e.substring(r),l=this.diff_main(i,s,!1,o),c=this.diff_main(a,u,!1,o);return l.concat(c)},r.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function o(t){for(var e="",o=0,i=-1,s=n.length;i<t.length-1;){-1==(i=t.indexOf("\n",o))&&(i=t.length-1);var a=t.substring(o,i+1);o=i+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,n[s++]=a)}return e}return n[0]="",{chars1:o(t),chars2:o(e),lineArray:n}},r.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],o=[],i=0;i<r.length;i++)o[i]=e[r.charCodeAt(i)];t[n][1]=o.join("")}},r.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)==e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},r.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},r.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var o=Math.min(n,r);if(t==e)return o;for(var i=0,s=1;;){var a=t.substring(o-s),u=e.indexOf(a);if(-1==u)return i;s+=u,0!=u&&t.substring(o-s)!=e.substring(0,s)||(i=s,s++)}},r.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var o=this;function i(t,e,n){for(var r,i,s,a,u=t.substring(n,n+Math.floor(t.length/4)),l=-1,c="";-1!=(l=e.indexOf(u,l+1));){var f=o.diff_commonPrefix(t.substring(n),e.substring(l)),h=o.diff_commonSuffix(t.substring(0,n),e.substring(0,l));c.length<h+f&&(c=e.substring(l-h,l)+e.substring(l,l+f),r=t.substring(0,n-h),i=t.substring(n+f),s=e.substring(0,l-h),a=e.substring(l+f))}return 2*c.length>=t.length?[r,i,s,a,c]:null}var s,a,u,l,c,f=i(n,r,Math.ceil(n.length/4)),h=i(n,r,Math.ceil(n.length/2));return f||h?(s=h?f&&f[4].length>h[4].length?f:h:f,t.length>e.length?(a=s[0],u=s[1],l=s[2],c=s[3]):(l=s[0],c=s[1],a=s[2],u=s[3]),[a,u,l,c,s[4]]):null},r.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,o=null,i=0,s=0,a=0,u=0,l=0;i<t.length;)0==t[i][0]?(n[r++]=i,s=u,a=l,u=0,l=0,o=t[i][1]):(1==t[i][0]?u+=t[i][1].length:l+=t[i][1].length,o&&o.length<=Math.max(s,a)&&o.length<=Math.max(u,l)&&(t.splice(n[r-1],0,[-1,o]),t[n[r-1]+1][0]=1,r--,i=--r>0?n[r-1]:-1,s=0,a=0,u=0,l=0,o=null,e=!0)),i++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),i=1;i<t.length;){if(-1==t[i-1][0]&&1==t[i][0]){var c=t[i-1][1],f=t[i][1],h=this.diff_commonOverlap_(c,f),d=this.diff_commonOverlap_(f,c);h>=d?(h>=c.length/2||h>=f.length/2)&&(t.splice(i,0,[0,f.substring(0,h)]),t[i-1][1]=c.substring(0,c.length-h),t[i+1][1]=f.substring(h),i++):(d>=c.length/2||d>=f.length/2)&&(t.splice(i,0,[0,c.substring(0,d)]),t[i-1][0]=1,t[i-1][1]=f.substring(0,f.length-d),t[i+1][0]=-1,t[i+1][1]=c.substring(d),i++),i++}i++}},r.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),o=e.charAt(0),i=n.match(r.nonAlphaNumericRegex_),s=o.match(r.nonAlphaNumericRegex_),a=i&&n.match(r.whitespaceRegex_),u=s&&o.match(r.whitespaceRegex_),l=a&&n.match(r.linebreakRegex_),c=u&&o.match(r.linebreakRegex_),f=l&&t.match(r.blanklineEndRegex_),h=c&&e.match(r.blanklineStartRegex_);return f||h?5:l||c?4:i&&!a&&u?3:a||u?2:i||s?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var o=t[n-1][1],i=t[n][1],s=t[n+1][1],a=this.diff_commonSuffix(o,i);if(a){var u=i.substring(i.length-a);o=o.substring(0,o.length-a),i=u+i.substring(0,i.length-a),s=u+s}for(var l=o,c=i,f=s,h=e(o,i)+e(i,s);i.charAt(0)===s.charAt(0);){o+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var d=e(o,i)+e(i,s);d>=h&&(h=d,l=o,c=i,f=s)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,o=null,i=0,s=!1,a=!1,u=!1,l=!1;i<t.length;)0==t[i][0]?(t[i][1].length<this.Diff_EditCost&&(u||l)?(n[r++]=i,s=u,a=l,o=t[i][1]):(r=0,o=null),u=l=!1):(-1==t[i][0]?l=!0:u=!0,o&&(s&&a&&u&&l||o.length<this.Diff_EditCost/2&&s+a+u+l==3)&&(t.splice(n[r-1],0,[-1,o]),t[n[r-1]+1][0]=1,r--,o=null,s&&a?(u=l=!0,r=0):(i=--r>0?n[r-1]:-1,u=l=!1),e=!0)),i++;e&&this.diff_cleanupMerge(t)},r.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,o=0,i="",s="";n<t.length;)switch(t[n][0]){case 1:o++,s+=t[n][1],n++;break;case-1:r++,i+=t[n][1],n++;break;case 0:r+o>1?(0!==r&&0!==o&&(0!==(e=this.diff_commonPrefix(s,i))&&(n-r-o>0&&0==t[n-r-o-1][0]?t[n-r-o-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),i=i.substring(e)),0!==(e=this.diff_commonSuffix(s,i))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),i=i.substring(0,i.length-e))),0===r?t.splice(n-o,r+o,[1,s]):0===o?t.splice(n-r,r+o,[-1,i]):t.splice(n-r-o,r+o,[-1,i],[1,s]),n=n-r-o+(r?1:0)+(o?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,o=0,r=0,i="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(t)},r.prototype.diff_xIndex=function(t,e){var n,r=0,o=0,i=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(o+=t[n][1].length),!(r>e));n++)i=r,s=o;return t.length!=n&&-1===t[n][0]?s:s+(e-i)},r.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,o=/>/g,i=/\n/g,s=0;s<t.length;s++){var a=t[s][0],u=t[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(i,"&para;<br>");switch(a){case 1:e[s]='<ins style="background:#e6ffe6;">'+u+"</ins>";break;case-1:e[s]='<del style="background:#ffe6e6;">'+u+"</del>";break;case 0:e[s]="<span>"+u+"</span>"}}return e.join("")},r.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,o=0;o<t.length;o++){var i=t[o][0],s=t[o][1];switch(i){case 1:n+=s.length;break;case-1:r+=s.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+Math.max(n,r)},r.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,o=0,i=e.split(/\t/g),s=0;s<i.length;s++){var a=i[s].substring(1);switch(i[s].charAt(0)){case"+":try{n[r++]=[1,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var u=parseInt(a,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+a);var l=t.substring(o,o+=u);"="==i[s].charAt(0)?n[r++]=[0,l]:n[r++]=[-1,l];break;default:if(i[s])throw new Error("Invalid diff operation in diff_fromDelta: "+i[s])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return n},r.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},r.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this;function i(t,r){var i=t/e.length,s=Math.abs(n-r);return o.Match_Distance?i+s/o.Match_Distance:s?1:i}var s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(i(0,a),s),-1!=(a=t.lastIndexOf(e,n+e.length))&&(s=Math.min(i(0,a),s)));var u,l,c=1<<e.length-1;a=-1;for(var f,h=e.length+t.length,d=0;d<e.length;d++){for(u=0,l=h;u<l;)i(d,n+l)<=s?u=l:h=l,l=Math.floor((h-u)/2+u);h=l;var p=Math.max(1,n-l+1),g=Math.min(n+l,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<d)-1;for(var m=g;m>=p;m--){var y=r[t.charAt(m-1)];if(v[m]=0===d?(v[m+1]<<1|1)&y:(v[m+1]<<1|1)&y|(f[m+1]|f[m])<<1|1|f[m+1],v[m]&c){var _=i(d,m-1);if(_<=s){if(s=_,!((a=m-1)>n))break;p=Math.max(1,2*n-a)}}}if(i(d+1,n)>s)break;f=v}return a},r.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},r.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var o=e.substring(t.start2-r,t.start2);o&&t.diffs.unshift([0,o]);var i=e.substring(t.start2+t.length1,t.start2+t.length1+r);i&&t.diffs.push([0,i]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+i.length,t.length2+=o.length+i.length}},r.prototype.patch_make=function(t,e,n){var o,i;if("string"==typeof t&&"string"==typeof e&&void 0===n)o=t,(i=this.diff_main(o,e,!0)).length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)i=t,o=this.diff_text1(i);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)o=t,i=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");o=t,i=n}if(0===i.length)return[];for(var s=[],a=new r.patch_obj,u=0,l=0,c=0,f=o,h=o,d=0;d<i.length;d++){var p=i[d][0],g=i[d][1];switch(u||0===p||(a.start1=l,a.start2=c),p){case 1:a.diffs[u++]=i[d],a.length2+=g.length,h=h.substring(0,c)+g+h.substring(c);break;case-1:a.length1+=g.length,a.diffs[u++]=i[d],h=h.substring(0,c)+h.substring(c+g.length);break;case 0:g.length<=2*this.Patch_Margin&&u&&i.length!=d+1?(a.diffs[u++]=i[d],a.length1+=g.length,a.length2+=g.length):g.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(a,f),s.push(a),a=new r.patch_obj,u=0,f=h,l=c)}1!==p&&(l+=g.length),-1!==p&&(c+=g.length)}return u&&(this.patch_addContext_(a,f),s.push(a)),s},r.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n],i=new r.patch_obj;i.diffs=[];for(var s=0;s<o.diffs.length;s++)i.diffs[s]=o.diffs[s].slice();i.start1=o.start1,i.start2=o.start2,i.length1=o.length1,i.length2=o.length2,e[n]=i}return e},r.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,o=[],i=0;i<t.length;i++){var s,a,u=t[i].start2+r,l=this.diff_text1(t[i].diffs),c=-1;if(l.length>this.Match_MaxBits?-1!=(s=this.match_main(e,l.substring(0,this.Match_MaxBits),u))&&(-1==(c=this.match_main(e,l.substring(l.length-this.Match_MaxBits),u+l.length-this.Match_MaxBits))||s>=c)&&(s=-1):s=this.match_main(e,l,u),-1==s)o[i]=!1,r-=t[i].length2-t[i].length1;else if(o[i]=!0,r=s-u,l==(a=-1==c?e.substring(s,s+l.length):e.substring(s,c+this.Match_MaxBits)))e=e.substring(0,s)+this.diff_text2(t[i].diffs)+e.substring(s+l.length);else{var f=this.diff_main(l,a,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(f)/l.length>this.Patch_DeleteThreshold)o[i]=!1;else{this.diff_cleanupSemanticLossless(f);for(var h,d=0,p=0;p<t[i].diffs.length;p++){var g=t[i].diffs[p];0!==g[0]&&(h=this.diff_xIndex(f,d)),1===g[0]?e=e.substring(0,s+h)+g[1]+e.substring(s+h):-1===g[0]&&(e=e.substring(0,s+h)+e.substring(s+this.diff_xIndex(f,d+g[1].length))),-1!==g[0]&&(d+=g[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),o]},r.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var o=t[0],i=o.diffs;if(0==i.length||0!=i[0][0])i.unshift([0,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>i[0][1].length){var s=e-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}return 0==(i=(o=t[t.length-1]).diffs).length||0!=i[i.length-1][0]?(i.push([0,n]),o.length1+=e,o.length2+=e):e>i[i.length-1][1].length&&(s=e-i[i.length-1][1].length,i[i.length-1][1]+=n.substring(0,s),o.length1+=s,o.length2+=s),n},r.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var o=t[n];t.splice(n--,1);for(var i=o.start1,s=o.start2,a="";0!==o.diffs.length;){var u=new r.patch_obj,l=!0;for(u.start1=i-a.length,u.start2=s-a.length,""!==a&&(u.length1=u.length2=a.length,u.diffs.push([0,a]));0!==o.diffs.length&&u.length1<e-this.Patch_Margin;){var c=o.diffs[0][0],f=o.diffs[0][1];1===c?(u.length2+=f.length,s+=f.length,u.diffs.push(o.diffs.shift()),l=!1):-1===c&&1==u.diffs.length&&0==u.diffs[0][0]&&f.length>2*e?(u.length1+=f.length,i+=f.length,l=!1,u.diffs.push([c,f]),o.diffs.shift()):(f=f.substring(0,e-u.length1-this.Patch_Margin),u.length1+=f.length,i+=f.length,0===c?(u.length2+=f.length,s+=f.length):l=!1,u.diffs.push([c,f]),f==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(f.length))}a=(a=this.diff_text2(u.diffs)).substring(a.length-this.Patch_Margin);var h=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==h&&(u.length1+=h.length,u.length2+=h.length,0!==u.diffs.length&&0===u.diffs[u.diffs.length-1][0]?u.diffs[u.diffs.length-1][1]+=h:u.diffs.push([0,h])),l||t.splice(++n,0,u)}}},r.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},r.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),o=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<n.length;){var s=n[o].match(i);if(!s)throw new Error("Invalid patch string: "+n[o]);var a=new r.patch_obj;for(e.push(a),a.start1=parseInt(s[1],10),""===s[2]?(a.start1--,a.length1=1):"0"==s[2]?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),""===s[4]?(a.start2--,a.length2=1):"0"==s[4]?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),o++;o<n.length;){var u=n[o].charAt(0);try{var l=decodeURI(n[o].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==u)a.diffs.push([-1,l]);else if("+"==u)a.diffs.push([1,l]);else if(" "==u)a.diffs.push([0,l]);else{if("@"==u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+l)}o++}}return e},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},e.exports=r,e.exports.diff_match_patch=r,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},{}],5:[function(t,e,n){e.exports=function(){var t=document.baseURI;if(!t)for(var e=document.getElementsByTagName("base"),n=0;n<e.length;n++)if(e[n].href){t=e[n].href;break}return t||document.documentURI}()},{}],6:[function(t,e,n){e.exports=t("./lib")},{"./lib":7}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');var n=t.ownerDocument.createRange(),r=e.startContainer,i=e.startOffset;n.setStart(t,0),n.setEnd(r,i);var s=(0,o.default)(n).length;return{start:s,end:s+(0,o.default)(e).length}},n.toRange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===t)throw new Error('missing required parameter "root"');var n=t.ownerDocument,o=n.createRange(),i=n.createNodeIterator(t,4),s=e.start||0,a=e.end||s,u=s-(0,r.default)(i,s),l=i.referenceNode,c=a-s+u,f=c-(0,r.default)(i,c),h=i.referenceNode;return o.setStart(l,u),o.setEnd(h,f),o};var r=i(t("dom-seek")),o=i(t("./range-to-string"));function i(t){return t&&t.__esModule?t:{default:t}}},{"./range-to-string":8,"dom-seek":29}],8:[function(t,e,n){"use strict";function r(t,e){if(!e&&t.firstChild)return t.firstChild;do{if(t.nextSibling)return t.nextSibling;t=t.parentNode}while(t);return t}function o(t,e){for(var n=function(t){return t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer.childNodes[t.startOffset]||r(t.startContainer,!0):t.startContainer}(t),o=function(t){return t.endContainer.nodeType===Node.ELEMENT_NODE?t.endContainer.childNodes[t.endOffset]||r(t.endContainer,!0):r(t.endContainer)}(t);n!==o;)e(n),n=r(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e="";return o(t,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n===t.startContainer?t.startOffset:0,o=n===t.endContainer?t.endOffset:n.textContent.length;e+=n.textContent.slice(r,o)}})),e}},{}],9:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./lib":10,dup:6}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');return u(t,s.fromRange(t,e))},n.fromTextPosition=u,n.toRange=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l(t,e,n);return null===r?null:s.toRange(t,r)},n.toTextPosition=l;var r,o=t("diff-match-patch"),i=(r=o)&&r.__esModule?r:{default:r},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("dom-anchor-text-position"));var a=new RegExp("(.|[\r\n]){1,"+String(32)+"}","g");function u(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var n=e.start;if(void 0===n)throw new Error('selector missing required property "start"');if(n<0)throw new Error('property "start" must be a non-negative integer');var r=e.end;if(void 0===r)throw new Error('selector missing required property "end"');if(r<0)throw new Error('property "end" must be a non-negative integer');var o=t.textContent.substr(n,r-n),i=Math.max(0,n-32),s=t.textContent.substr(i,n-i),a=Math.min(t.textContent.length,r+32);return{exact:o,prefix:s,suffix:t.textContent.substr(r,a-r)}}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "selector"');var r=e.exact;if(void 0===r)throw new Error('selector missing required property "exact"');var o=e.prefix,s=e.suffix,u=n.hint,l=new i.default;l.Match_Distance=2*t.textContent.length;var c=r.match(a),f=void 0===u?t.textContent.length/2|0:u,h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,p=-1,g=void 0!==o,v=void 0!==s,m=!1;g&&(p=l.match_main(t.textContent,o,f))>-1&&(f=p+o.length,m=!0),v&&!m&&(p=l.match_main(t.textContent,s,f+r.length))>-1&&(f=p-r.length);var y=c.shift();if(!((p=l.match_main(t.textContent,y,f))>-1))return null;f=d=(h=p)+y.length;var _=function(e,n){if(!e)return null;var r=l.match_main(t.textContent,n,e.loc);return-1===r?null:(e.loc=r+n.length,e.start=Math.min(e.start,r),e.end=Math.max(e.end,r+n.length),e)};l.Match_Distance=64;var b=c.reduce(_,{start:h,end:d,loc:f});return b?{start:b.start,end:b.end}:null}},{"diff-match-patch":4,"dom-anchor-text-position":11}],11:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{"./lib":12,dup:6}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromRange=function(t,e){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===e)throw new Error('missing required parameter "range"');var n=t.ownerDocument.createRange(),r=e.startContainer,o=e.startOffset;n.setStart(t,0),n.setEnd(r,o);var s=(0,i.default)(n).length;return{start:s,end:s+(0,i.default)(e).length}},n.toRange=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0===t)throw new Error('missing required parameter "root"');var n=t.ownerDocument,i=n.createRange(),s=(0,r.default)(t,4),a=e.start||0,u=e.end||a,l=(0,o.default)(s,a),c=a-l;s.pointerBeforeReferenceNode?i.setStart(s.referenceNode,c):(i.setStart(s.nextNode(),c),s.previousNode());var f=u-a+c;return c=f-(l=(0,o.default)(s,f)),s.pointerBeforeReferenceNode?i.setEnd(s.referenceNode,c):i.setEnd(s.nextNode(),c),i};var r=s(t("dom-node-iterator")),o=s(t("dom-seek")),i=s(t("./range-to-string"));function s(t){return t&&t.__esModule?t:{default:t}}},{"./range-to-string":13,"dom-node-iterator":15,"dom-seek":24}],13:[function(t,e,n){"use strict";function r(t,e){if(!e&&t.firstChild)return t.firstChild;do{if(t.nextSibling)return t.nextSibling;t=t.parentNode}while(t);return t}function o(t,e){for(var n=function(t){return t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer.childNodes[t.startOffset]||r(t.startContainer,!0):t.startContainer}(t),o=function(t){return t.endContainer.nodeType===Node.ELEMENT_NODE?t.endContainer.childNodes[t.endOffset]||r(t.endContainer,!0):r(t.endContainer)}(t);n!==o;)e(n),n=r(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e="";return o(t,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n===t.startContainer?t.startOffset:0,o=n===t.endContainer?t.endOffset:n.textContent.length;e+=n.textContent.slice(r,o)}})),e}},{}],14:[function(t,e,n){e.exports=t("./lib/implementation").default},{"./lib/implementation":18}],15:[function(t,e,n){e.exports=t("./lib").default,e.exports.getPolyfill=t("./polyfill"),e.exports.implementation=t("./implementation"),e.exports.shim=t("./shim")},{"./implementation":14,"./lib":19,"./polyfill":22,"./shim":23}],16:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=9==t.nodeType||t.ownerDocument,i=o.createNodeIterator(t,e,n,!1);return new r(i,t,e,n)};var r=function(){function t(e,n,r,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=n,this.whatToShow=r,this.filter=o,this.referenceNode=n,this.pointerBeforeReferenceNode=!0,this._iter=e}return t.prototype.nextNode=function(){var t=this._iter.nextNode();return this.pointerBeforeReferenceNode=!1,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.previousNode=function(){var t=this._iter.previousNode();return this.pointerBeforeReferenceNode=!0,null===t?null:(this.referenceNode=t,this.referenceNode)},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],17:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=t.ownerDocument;return r.createNodeIterator.call(r,t,e,n)}},{}],18:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?4294967295:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return new r(t,e,n)};var r=function(){function t(e,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.root=e,this.whatToShow=n,this.filter=r,this.referenceNode=e,this.pointerBeforeReferenceNode=!0,this._filter=function(t){return!r||1===r(t)},this._show=function(t){return n>>t.nodeType-1&!0}}return t.prototype.nextNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!1;var e=this.referenceNode;if(t&&this._show(e)&&this._filter(e))return e;do{if(e.firstChild)e=e.firstChild;else{do{if(e===this.root)return null;if(e.nextSibling)break;e=e.parentNode}while(e);e=e.nextSibling}}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!1,e},t.prototype.previousNode=function(){var t=this.pointerBeforeReferenceNode;this.pointerBeforeReferenceNode=!0;var e=this.referenceNode;if(!t&&this._show(e)&&this._filter(e))return e;do{if(e===this.root)return null;if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode}while(!this._show(e)||!this._filter(e));return this.referenceNode=e,this.pointerBeforeReferenceNode=!0,e},t.prototype.toString=function(){return"[object NodeIterator]"},t}()},{}],19:[function(t,e,n){"use strict";n.__esModule=!0;var r=s(t("./polyfill")),o=s(t("./implementation")),i=s(t("./shim"));function s(t){return t&&t.__esModule?t:{default:t}}var a=(0,r.default)();a.implementation=o.default,a.shim=i.default,n.default=a},{"./implementation":18,"./polyfill":20,"./shim":21}],20:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){try{var t="undefined"==typeof document?{}:document;return(0,o.default)(t,4294967295,null,!1).referenceNode===t?o.default:r.default}catch(t){return i.default}};var r=s(t("./adapter")),o=s(t("./builtin")),i=s(t("./implementation"));function s(t){return t&&t.__esModule?t:{default:t}}},{"./adapter":16,"./builtin":17,"./implementation":18}],21:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(){var t="undefined"==typeof document?{}:document,e=(0,o.default)();return e!==r.default&&(t.createNodeIterator=e),e};var r=i(t("./builtin")),o=i(t("./polyfill"));function i(t){return t&&t.__esModule?t:{default:t}}},{"./builtin":17,"./polyfill":20}],22:[function(t,e,n){e.exports=t("./lib/polyfill").default},{"./lib/polyfill":20}],23:[function(t,e,n){e.exports=t("./lib/shim").default},{"./lib/shim":21}],24:[function(t,e,n){e.exports=t("./lib").default},{"./lib":25}],25:[function(t,e,n){"use strict";n.__esModule=!0,n.default=function(t,e){if(4!==t.whatToShow)throw new Error("Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.");var n=0,r=t.referenceNode,o=null;if(function(t){return!isNaN(parseInt(t))&&isFinite(t)}(e))o={forward:function(){return n<e},backward:function(){return n>e}};else{if(!function(t){return 3===t.nodeType}(e))throw new Error("Argument 2 of seek must be a number or a Text Node.");o={forward:s(r,e)?function(){return!1}:function(){return r!==e},backward:function(){return r!=e||!t.pointerBeforeReferenceNode}}}for(;o.forward()&&null!==(r=t.nextNode());)n+=r.nodeValue.length;for(;o.backward()&&null!==(r=t.previousNode());)n-=r.nodeValue.length;return n};var r=i(t("ancestors")),o=i(t("index-of"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(t===e)return!1;for(var n=null,i=[t].concat((0,r.default)(t)).reverse(),s=[e].concat((0,r.default)(e)).reverse();i[0]===s[0];)n=i.shift(),s.shift();return i=i[0],s=s[0],(0,o.default)(n.childNodes,i)>(0,o.default)(n.childNodes,s)}},{ancestors:1,"index-of":33}],26:[function(t,e,n){"use strict";e.exports=t("./lib/implementation").default},{"./lib/implementation":27}],27:[function(t,e,n){"use strict";var r,o;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;if("function"==typeof c){var o=c(r,t,e,n,!1),i=u(o),s=a(i,"referenceNode");return void 0===s?p(o):o}return d(t,e,n)};n.default=i;var s=Object.create.bind(Object),a=Object.getOwnPropertyDescriptor.bind(Object),u=Object.getPrototypeOf.bind(Object),l=null===(r=Document)||void 0===r||null===(o=r.prototype)||void 0===o?void 0:o.createNodeIterator,c=l&&Function.prototype.call.bind(l);function f(t,e){if(t.firstChild)return t.firstChild;for(;t!==e;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function h(t,e){if(t===e)return null;if(t.previousSibling){for(t=t.previousSibling;t.lastChild;)t=t.lastChild;return t}return t.parentNode}function d(t,e,n){var r={referenceNode:t,pointerBeforeReferenceNode:!0};function o(t){return!n||1===n(t)}function i(t){return e>>t.nodeType-1&!0}return s({},{root:{value:t},referenceNode:{get:function(){return r.referenceNode}},pointerBeforeReferenceNode:{get:function(){return r.pointerBeforeReferenceNode}},whatToShow:{value:e},filter:{value:n},nextNode:{value:function(){for(var e=r.referenceNode,n=r.pointerBeforeReferenceNode;;){if(n?n=!1:e=f(e,t),null===e)return null;if(i(e)&&o(e))break}return r.referenceNode=e,r.pointerBeforeReferenceNode=n,e}},previousNode:{value:function(){for(var t=r.pointerBeforeReferenceNode,e=r.referenceNode;;){if(t?e=h(e,r.root):t=!0,null===e)return null;if(i(e)&&o(e))break}return r.referenceNode=e,r.pointerBeforeReferenceNode=t,e}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}})}function p(t){var e={referenceNode:t.root,pointerBeforeReferenceNode:!0},n=u(t),r=s(n,{root:{get:function(){return t.root}},referenceNode:{get:function(){return e.referenceNode}},pointerBeforeReferenceNode:{get:function(){return e.pointerBeforeReferenceNode}},whatToShow:{get:function(){return t.whatToShow}},filter:{get:function(){return t.filter}},nextNode:{value:function(){var n=t.nextNode();return null===n?null:(e.referenceNode=n,e.pointerBeforeReferenceNode=!1,e.referenceNode)}},previousNode:{value:function(){var n=t.previousNode();return null===n?null:(e.referenceNode=n,e.pointerBeforeReferenceNode=!0,e.referenceNode)}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}});return s(r)}},{}],28:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return r}},{"./implementation":26}],29:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./lib":30,dup:24}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){if(4!==t.whatToShow){var n;try{n=new DOMException(o,"InvalidStateError")}catch(t){(n=new Error(o)).code=11,n.name="InvalidStateError",n.toString=function(){return"InvalidStateError: ".concat(o)}}throw n}var a=0,u=t.referenceNode,l=null;if(function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}(e))l={forward:function(){return a<e},backward:function(){return a>e||!t.pointerBeforeReferenceNode}};else{if(!i(e))throw new TypeError("Argument 2 of seek must be an integer or a Text Node.");l={forward:s(u,e)?function(){return!1}:function(){return u!==e},backward:function(){return u!==e||!t.pointerBeforeReferenceNode}}}for(;l.forward();){if(null===(u=t.nextNode()))throw new RangeError(r);a+=u.nodeValue.length}for(t.nextNode()&&(u=t.previousNode());l.backward();){if(null===(u=t.previousNode()))throw new RangeError(r);a-=u.nodeValue.length}if(!i(t.referenceNode))throw new RangeError(r);return a};var r="Iterator exhausted before seek ended.",o="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.";function i(t){return 3===t.nodeType}function s(t,e){return 2&t.compareDocumentPosition(e)}},{}],31:[function(t,e,n){(function(t){!function(r,o){"object"==typeof n&&void 0!==e?o():"function"==typeof t&&t.amd?t(o):o()}(0,(function(){"use strict";function t(t){var e=!0,n=!1,r=null,o={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function s(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function a(t){e=!1}function u(){document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("mouseup",l),document.addEventListener("pointermove",l),document.addEventListener("pointerdown",l),document.addEventListener("pointerup",l),document.addEventListener("touchmove",l),document.addEventListener("touchstart",l),document.addEventListener("touchend",l)}function l(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",l),document.removeEventListener("pointermove",l),document.removeEventListener("pointerdown",l),document.removeEventListener("pointerup",l),document.removeEventListener("touchmove",l),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",l))}document.addEventListener("keydown",(function(n){n.metaKey||n.altKey||n.ctrlKey||(i(t.activeElement)&&s(t.activeElement),e=!0)}),!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerdown",a,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("visibilitychange",(function(t){"hidden"===document.visibilityState&&(n&&(e=!0),u())}),!0),u(),t.addEventListener("focus",(function(t){var n,r,a;i(t.target)&&(e||(r=(n=t.target).type,"INPUT"===(a=n.tagName)&&o[r]&&!n.readOnly||"TEXTAREA"===a&&!n.readOnly||n.isContentEditable))&&s(t.target)}),!0),t.addEventListener("blur",(function(t){var e;i(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(r),r=window.setTimeout((function(){n=!1}),100),(e=t.target).hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added")))}),!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var e;window.applyFocusVisiblePolyfill=t;try{e=new CustomEvent("focus-visible-polyfill-ready")}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(e)}"undefined"!=typeof document&&t(document)}))}).call(this,void 0)},{}],32:[function(t,e,n){(function(t){
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(n,r,o,i){"use strict";var s,a=["","webkit","Moz","MS","ms","o"],u=r.createElement("div"),l=Math.round,c=Math.abs,f=Date.now;function h(t,e,n){return setTimeout(_(t,n),e)}function d(t,e,n){return!!Array.isArray(t)&&(p(t,n[e],n),!0)}function p(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function g(t,e,r){var o="DEPRECATED METHOD: "+e+"\n"+r+" AT \n";return function(){var e=new Error("get-stack-trace"),r=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=n.console&&(n.console.warn||n.console.log);return i&&i.call(n.console,o,r),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}:Object.assign;var v=g((function(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&void 0===t[r[o]])&&(t[r[o]]=e[r[o]]),o++;return t}),"extend","Use `assign`."),m=g((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function y(t,e,n){var r,o=e.prototype;(r=t.prototype=Object.create(o)).constructor=t,r._super=o,n&&s(r,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function w(t,e){return void 0===t?e:t}function E(t,e,n){p(O(e),(function(e){t.addEventListener(e,n,!1)}))}function x(t,e,n){p(O(e),(function(e){t.removeEventListener(e,n,!1)}))}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function O(t){return t.trim().split(/\s+/g)}function C(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function N(t){return Array.prototype.slice.call(t,0)}function A(t,e,n){for(var r=[],o=[],i=0;i<t.length;){var s=e?t[i][e]:t[i];C(o,s)<0&&r.push(t[i]),o[i]=s,i++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function P(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),i=0;i<a.length;){if((r=(n=a[i])?n+o:e)in t)return r;i++}}var k=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var M="ontouchstart"in n,j=void 0!==P(n,"PointerEvent"),D=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I=["x","y"],L=["clientX","clientY"];function q(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function F(t,e,n){var r=n.pointers.length,o=n.changedPointers.length,i=1&e&&r-o==0,s=12&e&&r-o==0;n.isFirst=!!i,n.isFinal=!!s,i&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,o=r.length;n.firstInput||(n.firstInput=H(e)),o>1&&!n.firstMultiple?n.firstMultiple=H(e):1===o&&(n.firstMultiple=!1);var i=n.firstInput,s=n.firstMultiple,a=s?s.center:i.center,u=e.center=B(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-i.timeStamp,e.angle=W(a,u),e.distance=V(a,u),function(t,e){var n=e.center,r=t.offsetDelta||{},o=t.prevDelta||{},i=t.prevInput||{};1!==e.eventType&&4!==i.eventType||(o=t.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-r.x),e.deltaY=o.y+(n.y-r.y)}(n,e),e.offsetDirection=z(e.deltaX,e.deltaY);var l,h,d=U(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=c(d.x)>c(d.y)?d.x:d.y,e.scale=s?(l=s.pointers,V((h=r)[0],h[1],L)/V(l[0],l[1],L)):1,e.rotation=s?function(t,e){return W(e[1],e[0],L)+W(t[1],t[0],L)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,o,i,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(a>25||void 0===s.velocity)){var u=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,f=U(a,u,l);r=f.x,o=f.y,n=c(f.x)>c(f.y)?f.x:f.y,i=z(u,l),t.lastInterval=e}else n=s.velocity,r=s.velocityX,o=s.velocityY,i=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=i}(n,e);var p=t.element;S(e.srcEvent.target,p)&&(p=e.srcEvent.target),e.target=p}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function H(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:B(e),deltaX:t.deltaX,deltaY:t.deltaY}}function B(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,o=0;o<e;)n+=t[o].clientX,r+=t[o].clientY,o++;return{x:l(n/e),y:l(r/e)}}function U(t,e,n){return{x:e/t||0,y:n/t||0}}function z(t,e){return t===e?1:c(t)>=c(e)?t<0?2:4:e<0?8:16}function V(t,e,n){n||(n=I);var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(r*r+o*o)}function W(t,e,n){n||(n=I);var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,r)/Math.PI}q.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(R(this.element),this.evWin,this.domHandler)}};var X={mousedown:1,mousemove:2,mouseup:4};function $(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,q.apply(this,arguments)}y($,q,{handler:function(t){var e=X[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Y={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},G={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",K="pointermove pointerup pointercancel";function Z(){this.evEl=Q,this.evWin=K,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(Q="MSPointerDown",K="MSPointerMove MSPointerUp MSPointerCancel"),y(Z,q,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),o=Y[r],i=G[t.pointerType]||t.pointerType,s="touch"==i,a=C(e,t.pointerId,"pointerId");1&o&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&o&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),n&&e.splice(a,1))}});var J={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function tt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,q.apply(this,arguments)}function et(t,e){var n=N(t.touches),r=N(t.changedTouches);return 12&e&&(n=A(n.concat(r),"identifier",!0)),[n,r]}y(tt,q,{handler:function(t){var e=J[t.type];if(1===e&&(this.started=!0),this.started){var n=et.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var nt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function rt(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},q.apply(this,arguments)}function ot(t,e){var n=N(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,s=N(t.changedTouches),a=[],u=this.target;if(i=n.filter((function(t){return S(t.target,u)})),1===e)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<s.length;)r[s[o].identifier]&&a.push(s[o]),12&e&&delete r[s[o].identifier],o++;return a.length?[A(i.concat(a),"identifier",!0),a]:void 0}function it(){q.apply(this,arguments);var t=_(this.handler,this);this.touch=new rt(this.manager,t),this.mouse=new $(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function st(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,at.call(this,e)):12&t&&at.call(this,e)}function at(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function ut(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(e-o.x),s=Math.abs(n-o.y);if(i<=25&&s<=25)return!0}return!1}y(rt,q,{handler:function(t){var e=nt[t.type],n=ot.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),y(it,q,{handler:function(t,e,n){var r="touch"==n.pointerType,o="mouse"==n.pointerType;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)st.call(this,e,n);else if(o&&ut.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var lt=P(u.style,"touchAction"),ct=void 0!==lt,ft=function(){if(!ct)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!e||n.CSS.supports("touch-action",r)})),t}();function ht(t,e){this.manager=t,this.set(e)}function dt(t){this.options=s({},this.defaults,t||{}),this.id=k++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function gt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function vt(t,e){var n=e.manager;return n?n.get(t):t}function mt(){dt.apply(this,arguments)}function yt(){mt.apply(this,arguments),this.pX=null,this.pY=null}function _t(){mt.apply(this,arguments)}function bt(){dt.apply(this,arguments),this._timer=null,this._input=null}function wt(){mt.apply(this,arguments)}function Et(){mt.apply(this,arguments)}function xt(){dt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function St(t,e){return(e=e||{}).recognizers=w(e.recognizers,St.defaults.preset),new Tt(t,e)}function Tt(t,e){var n;this.options=s({},St.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(j?Z:D?rt:M?it:$))(n,F),this.touchAction=new ht(this,this.options.touchAction),Ot(this,!0),p(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Ot(t,e){var n,r=t.element;r.style&&(p(t.options.cssProps,(function(o,i){n=P(r.style,i),e?(t.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}ht.prototype={set:function(t){"compute"==t&&(t=this.compute()),ct&&this.manager.element.style&&ft[t]&&(this.manager.element.style[lt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,(function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,"none"))return"none";var e=T(t,"pan-x"),n=T(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":T(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,o=T(r,"none")&&!ft.none,i=T(r,"pan-y")&&!ft["pan-y"],s=T(r,"pan-x")&&!ft["pan-x"];if(o){var a=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(a&&u&&l)return}if(!s||!i)return o||i&&6&n||s&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},dt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=vt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)||(t=vt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===C(e,t=vt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=vt(t,this);var e=C(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+pt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+pt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},y(mt,dt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,o=this.attrTest(t);return r&&(8&n||!o)?16|e:r||o?4&n?8|e:2&e?4|e:2:32}}),y(yt,mt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,o=t.direction,i=t.deltaX,s=t.deltaY;return o&e.direction||(6&e.direction?(o=0===i?1:i<0?2:4,n=i!=this.pX,r=Math.abs(t.deltaX)):(o=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=o,n&&r>e.threshold&&o&e.direction},attrTest:function(t){return mt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=gt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),y(_t,mt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),y(bt,dt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=h((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),y(wt,mt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),y(Et,mt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return yt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=gt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),y(xt,dt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=t.eventType)return this.failTimeout();var i=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||V(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&i?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=h((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=h((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),St.VERSION="2.0.7",St.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[wt,{enable:!1}],[_t,{enable:!1},["rotate"]],[Et,{direction:6}],[yt,{direction:6},["swipe"]],[xt],[xt,{event:"doubletap",taps:2},["tap"]],[bt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Tt.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&14&n.state&&(o=e.curRecognizer=n),i++}},get:function(t){if(t instanceof dt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=C(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return p(O(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return p(O(t),(function(t){e?n[t]&&n[t].splice(C(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](e),o++}},destroy:function(){this.element&&Ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(St,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Tt,Input:q,TouchAction:ht,TouchInput:rt,MouseInput:$,PointerEventInput:Z,TouchMouseInput:it,SingleTouchInput:tt,Recognizer:dt,AttrRecognizer:mt,Tap:xt,Pan:yt,Swipe:Et,Pinch:_t,Rotate:wt,Press:bt,on:E,off:x,each:p,merge:m,extend:v,assign:s,inherit:y,bindFn:_,prefixed:P}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=St,"function"==typeof t&&t.amd?t((function(){return St})):void 0!==e&&e.exports?e.exports=St:n.Hammer=St}(window,document)}).call(this,void 0)},{}],33:[function(t,e,n){
/*!
 * index-of <https://github.com/jonschlinkert/index-of>
 *
 * Copyright (c) 2014-2015 Jon Schlinkert.
 * Licensed under the MIT license.
 */
"use strict";e.exports=function(t,e,n){if(n=n||0,null==t)return-1;var r=t.length,o=n<0?r+n:n;if(o>=t.length)return-1;for(;o<r;){if(t[o]===e)return o;o++}return-1}},{}],34:[function(t,e,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,l=a||u||Function("return this")(),c=Object.prototype.toString,f=Math.max,h=Math.min,d=function(){return l.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(t))return NaN;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var a=o.test(t);return a||i.test(t)?s(t.slice(2),a?2:8):r.test(t)?NaN:+t}e.exports=function(t,e,n){var r,o,i,s,a,u,l=0,c=!1,v=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=r,i=o;return r=o=void 0,l=e,s=t.apply(i,n)}function _(t){return l=t,a=setTimeout(w,e),c?y(t):s}function b(t){var n=t-u;return void 0===u||n>=e||n<0||v&&t-l>=i}function w(){var t=d();if(b(t))return E(t);a=setTimeout(w,function(t){var n=e-(t-u);return v?h(n,i-(t-l)):n}(t))}function E(t){return a=void 0,m&&r?y(t):(r=o=void 0,s)}function x(){var t=d(),n=b(t);if(r=arguments,o=this,u=t,n){if(void 0===a)return _(u);if(v)return a=setTimeout(w,e),y(u)}return void 0===a&&(a=setTimeout(w,e)),s}return e=g(e)||0,p(n)&&(c=!!n.leading,i=(v="maxWait"in n)?f(g(n.maxWait)||0,e):i,m="trailing"in n?!!n.trailing:m),x.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=u=o=a=void 0},x.flush=function(){return void 0===a?s:E(d())},x}}).call(this,window)},{}],35:[function(t,e,n){var r,o,i,s,a,u,l,c,f={},h=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(t,e){for(var n in e)t[n]=e[n];return t}function g(t){var e=t.parentNode;e&&e.removeChild(t)}function v(t,e,n){var r,o=arguments,i={};for(r in e)"key"!==r&&"ref"!==r&&(i[r]=e[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===i[r]&&(i[r]=t.defaultProps[r]);return m(t,i,e&&e.key,e&&e.ref,null)}function m(t,e,n,o,i){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return null==i&&(s.__v=s),r.vnode&&r.vnode(s),s}function y(t){return t.children}function _(t,e){this.props=t,this.context=e}function b(t,e){if(null==e)return t.__?b(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?b(t):null}function w(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return w(t)}}function E(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!s++||u!==r.debounceRendering)&&((u=r.debounceRendering)||a)(x)}function x(){for(var t;s=i.length;)t=i.sort((function(t,e){return t.__v.__b-e.__v.__b})),i=[],t.some((function(t){var e,n,r,o,i,s,a;t.__d&&(s=(i=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=p({},i)).__v=r,o=N(a,i,r,e.__n,void 0!==a.ownerSVGElement,null,n,null==s?b(i):s),A(n,i),o!=s&&w(i)))}))}function S(t,e,n,r,o,i,s,a,u,l){var c,d,p,v,_,w,E,x,S,T=r&&r.__k||h,O=T.length;for(u==f&&(u=null!=s?s[0]:O?b(r,0):null),n.__k=[],c=0;c<e.length;c++)if(null!=(v=n.__k[c]=null==(v=e[c])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v?m(null,v,null,null,v):Array.isArray(v)?m(y,{children:v},null,null,null):null!=v.__e||null!=v.__c?m(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(p=T[c])||p&&v.key==p.key&&v.type===p.type)T[c]=void 0;else for(d=0;d<O;d++){if((p=T[d])&&v.key==p.key&&v.type===p.type){T[d]=void 0;break}p=null}if(_=N(t,v,p=p||f,o,i,s,a,u,l),(d=v.ref)&&p.ref!=d&&(x||(x=[]),p.ref&&x.push(p.ref,null,v),x.push(d,v.__c||_,v)),null!=_){if(null==E&&(E=_),S=void 0,void 0!==v.__d)S=v.__d,v.__d=void 0;else if(s==p||_!=u||null==_.parentNode){t:if(null==u||u.parentNode!==t)t.appendChild(_),S=null;else{for(w=u,d=0;(w=w.nextSibling)&&d<O;d+=2)if(w==_)break t;t.insertBefore(_,u),S=u}"option"==n.type&&(t.value="")}u=void 0!==S?S:_.nextSibling,"function"==typeof n.type&&(n.__d=u)}else u&&p.__e==u&&u.parentNode!=t&&(u=b(p))}if(n.__e=E,null!=s&&"function"!=typeof n.type)for(c=s.length;c--;)null!=s[c]&&g(s[c]);for(c=O;c--;)null!=T[c]&&R(T[c],T[c]);if(x)for(c=0;c<x.length;c++)k(x[c],x[++c],x[++c])}function T(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===d.test(e)?n+"px":null==n?"":n}function O(t,e,n,r,o){var i,s,a,u,l;if(o?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(i=t.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(u in r)n&&u in n||T(i,u,"");if(n)for(l in n)r&&n[l]===r[l]||T(i,l,n[l])}else"o"===e[0]&&"n"===e[1]?(s=e!==(e=e.replace(/Capture$/,"")),a=e.toLowerCase(),e=(a in t?a:e).slice(2),n?(r||t.addEventListener(e,C,s),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,C,s)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function C(t){this.l[t.type](r.event?r.event(t):t)}function N(t,e,n,o,i,s,a,u,l){var c,f,h,d,g,v,m,b,w,E,x,T=e.type;if(void 0!==e.constructor)return null;(c=r.__b)&&c(e);try{t:if("function"==typeof T){if(b=e.props,w=(c=T.contextType)&&o[c.__c],E=c?w?w.props.value:c.__:o,n.__c?m=(f=e.__c=n.__c).__=f.__E:("prototype"in T&&T.prototype.render?e.__c=f=new T(b,E):(e.__c=f=new _(b,E),f.constructor=T,f.render=M),w&&w.sub(f),f.props=b,f.state||(f.state={}),f.context=E,f.__n=o,h=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=T.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=p({},f.__s)),p(f.__s,T.getDerivedStateFromProps(b,f.__s))),d=f.props,g=f.state,h)null==T.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==T.getDerivedStateFromProps&&b!==d&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(b,E),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(b,f.__s,E)||e.__v===n.__v){for(f.props=b,f.state=f.__s,e.__v!==n.__v&&(f.__d=!1),f.__v=e,e.__e=n.__e,e.__k=n.__k,f.__h.length&&a.push(f),c=0;c<e.__k.length;c++)e.__k[c]&&(e.__k[c].__=e);break t}null!=f.componentWillUpdate&&f.componentWillUpdate(b,f.__s,E),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(d,g,v)}))}f.context=E,f.props=b,f.state=f.__s,(c=r.__r)&&c(e),f.__d=!1,f.__v=e,f.__P=t,c=f.render(f.props,f.state,f.context),null!=f.getChildContext&&(o=p(p({},o),f.getChildContext())),h||null==f.getSnapshotBeforeUpdate||(v=f.getSnapshotBeforeUpdate(d,g)),x=null!=c&&c.type==y&&null==c.key?c.props.children:c,S(t,Array.isArray(x)?x:[x],e,n,o,i,s,a,u,l),f.base=e.__e,f.__h.length&&a.push(f),m&&(f.__E=f.__=null),f.__e=!1}else null==s&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=P(n.__e,e,n,o,i,s,a,l);(c=r.diffed)&&c(e)}catch(t){e.__v=null,r.__e(t,e,n)}return e.__e}function A(t,e){r.__c&&r.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){r.__e(t,e.__v)}}))}function P(t,e,n,r,o,i,s,a){var u,l,c,d,p,g=n.props,v=e.props;if(o="svg"===e.type||o,null!=i)for(u=0;u<i.length;u++)if(null!=(l=i[u])&&((null===e.type?3===l.nodeType:l.localName===e.type)||t==l)){t=l,i[u]=null;break}if(null==t){if(null===e.type)return document.createTextNode(v);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,v.is&&{is:v.is}),i=null,a=!1}if(null===e.type)g!==v&&t.data!=v&&(t.data=v);else{if(null!=i&&(i=h.slice.call(t.childNodes)),c=(g=n.props||f).dangerouslySetInnerHTML,d=v.dangerouslySetInnerHTML,!a){if(null!=i)for(g={},p=0;p<t.attributes.length;p++)g[t.attributes[p].name]=t.attributes[p].value;(d||c)&&(d&&c&&d.__html==c.__html||(t.innerHTML=d&&d.__html||""))}(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||O(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||O(t,i,e[i],n[i],r)})(t,v,g,o,a),d?e.__k=[]:(u=e.props.children,S(t,Array.isArray(u)?u:[u],e,n,r,"foreignObject"!==e.type&&o,i,s,f,a)),a||("value"in v&&void 0!==(u=v.value)&&u!==t.value&&O(t,"value",u,g.value,!1),"checked"in v&&void 0!==(u=v.checked)&&u!==t.checked&&O(t,"checked",u,g.checked,!1))}return t}function k(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function R(t,e,n){var o,i,s;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||k(o,null,e)),n||"function"==typeof t.type||(n=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){r.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(s=0;s<o.length;s++)o[s]&&R(o[s],e,n);null!=i&&g(i)}function M(t,e,n){return this.constructor(t,n)}function j(t,e,n){var o,i,s;r.__&&r.__(t,e),i=(o=n===l)?null:n&&n.__k||e.__k,t=v(y,null,[t]),s=[],N(e,(o?e:n||e).__k=t,i||f,f,void 0!==e.ownerSVGElement,n&&!o?[n]:i?null:e.childNodes.length?h.slice.call(e.childNodes):null,s,n||f,o),A(s,t)}r={__e:function(t,e){for(var n,r;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(t)),r)return E(n.__E=n)}catch(e){t=e}throw t}},o=function(t){return null!=t&&void 0===t.constructor},_.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&p(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),E(this))},_.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),E(this))},_.prototype.render=y,i=[],s=0,a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=f,c=0,n.render=j,n.hydrate=function(t,e){j(t,e,l)},n.createElement=v,n.h=v,n.Fragment=y,n.createRef=function(){return{}},n.isValidElement=o,n.Component=_,n.cloneElement=function(t,e){var n,r;for(r in e=p(p({},t.props),e),arguments.length>2&&(e.children=h.slice.call(arguments,2)),n={},e)"key"!==r&&"ref"!==r&&(n[r]=e[r]);return m(t.type,n,e.key||t.key,e.ref||t.ref,null)},n.createContext=function(t){var e={},n={__c:"__cC"+c++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var r,o=this;return this.getChildContext||(r=[],this.getChildContext=function(){return e[n.__c]=o,e},this.shouldComponentUpdate=function(t){o.props.value!==t.value&&r.some((function(e){e.context=t.value,E(e)}))},this.sub=function(t){r.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){r.splice(r.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Consumer.contextType=n,n.Provider.__=n,n},n.toChildArray=function t(e){return null==e||"boolean"==typeof e?[]:Array.isArray(e)?h.concat.apply([],e.map(t)):[e]},n._e=R,n.options=r},{}],36:[function(t,e,n){var r,o,i,s=t("preact"),a=0,u=[],l=s.options.__r,c=s.options.diffed,f=s.options.__c,h=s.options.unmount;function d(t,e){s.options.__h&&s.options.__h(o,t,a||e),a=0;var n=o.__H||(o.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function p(t){return a=1,g(E,t)}function g(t,e,n){var i=d(r++,2);return i.t=t,i.__c||(i.__c=o,i.__=[n?n(e):E(void 0,e),function(t){var e=i.t(i.__[0],t);i.__[0]!==e&&(i.__[0]=e,i.__c.setState({}))}]),i.__}function v(t,e){var n=d(r++,4);!s.options.__s&&w(n.__H,e)&&(n.__=t,n.__H=e,o.__h.push(n))}function m(t,e){var n=d(r++,7);return w(n.__H,e)?(n.__H=e,n.__h=t,n.__=t()):n.__}function y(){u.some((function(t){if(t.__P)try{t.__H.__h.forEach(_),t.__H.__h.forEach(b),t.__H.__h=[]}catch(e){return t.__H.__h=[],s.options.__e(e,t.__v),!0}})),u=[]}function _(t){"function"==typeof t.u&&t.u()}function b(t){t.u=t.__()}function w(t,e){return!t||e.some((function(e,n){return e!==t[n]}))}function E(t,e){return"function"==typeof e?e(t):e}s.options.__r=function(t){l&&l(t),r=0;var e=(o=t.__c).__H;e&&(e.__h.forEach(_),e.__h.forEach(b),e.__h=[])},s.options.diffed=function(t){c&&c(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==u.push(e)&&i===s.options.requestAnimationFrame||((i=s.options.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);"undefined"!=typeof window&&(e=requestAnimationFrame(n))})(y))},s.options.__c=function(t,e){e.some((function(t){try{t.__h.forEach(_),t.__h=t.__h.filter((function(t){return!t.__||b(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],s.options.__e(n,t.__v)}})),f&&f(t,e)},s.options.unmount=function(t){h&&h(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(_)}catch(t){s.options.__e(t,e.__v)}},n.useState=p,n.useReducer=g,n.useEffect=function(t,e){var n=d(r++,3);!s.options.__s&&w(n.__H,e)&&(n.__=t,n.__H=e,o.__H.__h.push(n))},n.useLayoutEffect=v,n.useRef=function(t){return a=5,m((function(){return{current:t}}),[])},n.useImperativeHandle=function(t,e,n){a=6,v((function(){"function"==typeof t?t(e()):t&&(t.current=e())}),null==n?n:n.concat(t))},n.useMemo=m,n.useCallback=function(t,e){return a=8,m((function(){return t}),e)},n.useContext=function(t){var e=o.context[t.__c],n=d(r++,9);return n.__c=t,e?(null==n.__&&(n.__=!0,e.sub(o)),e.props.value):t.__},n.useDebugValue=function(t,e){s.options.useDebugValue&&s.options.useDebugValue(e?e(t):t)},n.useErrorBoundary=function(t){var e=d(r++,10),n=p();return e.__=t,o.componentDidCatch||(o.componentDidCatch=function(t){e.__&&e.__(t),n[1](t)}),[n[0],function(){n[1](void 0)}]}},{preact:35}],37:[function(t,e,n){"use strict";var r=t("./lib/ReactPropTypesSecret");function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function t(t,e,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},{"./lib/ReactPropTypesSecret":39}],38:[function(t,e,n){e.exports=t("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":37}],39:[function(t,e,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],40:[function(t,e,n){function r(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function o(t){var e=t._scrollSettings;if(e){var n=e.maxSynchronousAlignments,i=function(t,e){var n,r,o,i,s,a,u,l=t.align,c=t.target.getBoundingClientRect(),f=l&&null!=l.left?l.left:.5,h=l&&null!=l.top?l.top:.5,d=l&&null!=l.leftOffset?l.leftOffset:0,p=l&&null!=l.topOffset?l.topOffset:0,g=f,v=h;if(t.isWindow(e))a=Math.min(c.width,e.innerWidth),u=Math.min(c.height,e.innerHeight),r=c.left+e.pageXOffset-e.innerWidth*g+a*g,o=c.top+e.pageYOffset-e.innerHeight*v+u*v,o-=p,i=(r-=d)-e.pageXOffset,s=o-e.pageYOffset;else{a=c.width,u=c.height,n=e.getBoundingClientRect();var m=c.left-(n.left-e.scrollLeft),y=c.top-(n.top-e.scrollTop);r=m+a*g-e.clientWidth*g,o=y+u*v-e.clientHeight*v,r-=d,o-=p,r=Math.max(Math.min(r,e.scrollWidth-e.clientWidth),0),o=Math.max(Math.min(o,e.scrollHeight-e.clientHeight),0),i=r-e.scrollLeft,s=o-e.scrollTop}return{x:r,y:o,differenceX:i,differenceY:s}}(e,t),s=Date.now()-e.startTime,a=Math.min(1/e.time*s,1);if(e.endIterations>=n)return r(t,i.x,i.y),t._scrollSettings=null,e.end("complete");var u=1-e.ease(a);if(r(t,i.x-i.differenceX*u,i.y-i.differenceY*u),s>=e.time)return e.endIterations++,o(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(o.bind(null,t))}}function i(t){return t.self===t}function s(t,e,n,r){var s,a=!e._scrollSettings,u=e._scrollSettings,l=Date.now(),c={passive:!0};function f(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),n.debug&&console.log("Scrolling ended with type",t,"for",e),r(t),s&&(e.removeEventListener("touchstart",s,c),e.removeEventListener("wheel",s,c))}u&&u.end("canceled");var h=n.maxSynchronousAlignments;null==h&&(h=3),e._scrollSettings={startTime:l,endIterations:0,target:t,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||i,maxSynchronousAlignments:h,end:f},"cancellable"in n&&!n.cancellable||(s=f.bind(null,"canceled"),e.addEventListener("touchstart",s,c),e.addEventListener("wheel",s,c)),a&&o(e)}function a(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function u(){return!0}function l(t){if(t.assignedSlot)return l(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}e.exports=function(t,e,n){if(t){"function"==typeof e&&(n=e,e=null),e||(e={}),e.time=isNaN(e.time)?1e3:e.time,e.ease=e.ease||function(t){return 1-Math.pow(1-t,t/2)};var r=l(t),o=1,i=e.validTarget||u,c=e.isScrollable;for(e.debug&&(console.log("About to scroll to",t),r||console.error("Target did not have a parent, is it mounted in the DOM?"));r;)if(e.debug&&console.log("Scrolling parent node",r),i(r,o)&&(c?c(r,a):a(r))&&(o++,s(t,r,e,f)),!(r=l(r))){f("complete");break}}function f(t){--o||n&&n(t)}}},{}],41:[function(t,e,n){e.exports=t("./zen-observable.js").Observable},{"./zen-observable.js":42}],42:[function(t,e,n){"use strict";!function(t,r){void 0!==n?t(n,e):"undefined"!=typeof self&&t(self)}((function(t,e){function n(t){return"function"==typeof Symbol&&Boolean(Symbol[t])}function r(t){return n(t)?Symbol[t]:"@@"+t}function o(t,e){var n=t[e];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function i(t){var e=r("species");return e?t[e]:t}function s(t,e){Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t,n,r)}))}function a(t){var e=t._cleanup;e&&(t._cleanup=void 0,e())}function u(t){return void 0===t._observer}function l(t){u(t)||(t._observer=void 0,a(t))}function c(t,e){if(Object(t)!==t)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=t;var n=o(t,"start");if(n&&n.call(t,this),!u(this)){t=new f(this);try{var r=e.call(void 0,t);if(null!=r){if("function"==typeof r.unsubscribe)i=r,r=function(t){i.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(e){return void t.error(e)}var i;u(this)&&a(this)}}function f(t){this._subscription=t}function h(t){if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}s(c.prototype={},{get closed(){return u(this)},unsubscribe:function(){l(this)}}),s(f.prototype={},{get closed(){return u(this._subscription)},next:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;try{var r=o(n,"next");if(!r)return;return r.call(n,t)}catch(t){try{l(e)}finally{throw t}}}},error:function(t){var e=this._subscription;if(u(e))throw t;var n=e._observer;e._observer=void 0;try{var r=o(n,"error");if(!r)throw t;t=r.call(n,t)}catch(t){try{a(e)}finally{throw t}}return a(e),t},complete:function(t){var e=this._subscription;if(!u(e)){var n=e._observer;e._observer=void 0;try{var r=o(n,"complete");t=r?r.call(n,t):void 0}catch(t){try{a(e)}finally{throw t}}return a(e),t}}}),s(h.prototype,{subscribe:function(t){for(var e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);return"function"==typeof t&&(t={next:t,error:e[0],complete:e[1]}),new c(t,this._subscriber)},forEach:function(t){var e=this;return new Promise((function(n,r){if("function"!=typeof t)return Promise.reject(new TypeError(t+" is not a function"));e.subscribe({_subscription:null,start:function(t){if(Object(t)!==t)throw new TypeError(t+" is not an object");this._subscription=t},next:function(e){var n=this._subscription;if(!n.closed)try{return t(e)}catch(t){r(t),n.unsubscribe()}},error:r,complete:n})}))},map:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{e=t(e)}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(t){return n.complete(t)}})}))},filter:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){return e.subscribe({next:function(e){if(!n.closed){try{if(!t(e))return}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(){return n.complete()}})}))},reduce:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=i(this.constructor),r=arguments.length>1,o=!1,s=arguments[1],a=s;return new n((function(n){return e.subscribe({next:function(e){if(!n.closed){var i=!o;if(o=!0,!i||r)try{a=t(a,e)}catch(t){return n.error(t)}else a=e}},error:function(t){return n.error(t)},complete:function(){o||r?(n.next(a),n.complete()):n.error(new TypeError("Cannot reduce an empty sequence"))}})}))},flatMap:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(i(this.constructor))((function(n){var r=!1,o=[],i=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(t){return void n.error(t)}h.from(e).subscribe({_subscription:null,start:function(t){o.push(this._subscription=t)},next:function(t){n.next(t)},error:function(t){n.error(t)},complete:function(){var t=o.indexOf(this._subscription);t>=0&&o.splice(t,1),s()}})},error:function(t){return n.error(t)},complete:function(){r=!0,s()}});function s(){r&&0===o.length&&n.complete()}return function(t){o.forEach((function(t){return t.unsubscribe()})),i.unsubscribe()}}))}}),Object.defineProperty(h.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),s(h,{from:function(t){var e="function"==typeof this?this:h;if(null==t)throw new TypeError(t+" is not an object");var i=o(t,r("observable"));if(i){var s=i.call(t);if(Object(s)!==s)throw new TypeError(s+" is not an object");return s.constructor===e?s:new e((function(t){return s.subscribe(t)}))}if(n("iterator")&&(i=o(t,r("iterator"))))return new e((function(e){for(var n,r=i.call(t)[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;if(e.next(o),e.closed)return}e.complete()}));if(Array.isArray(t))return new e((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}));throw new TypeError(t+" is not observable")},of:function(){for(var t=[],e=0;e<arguments.length;++e)t.push(arguments[e]);var n="function"==typeof this?this:h;return new n((function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}))}}),Object.defineProperty(h,r("species"),{get:function(){return this},configurable:!0}),t.Observable=h}))},{}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Adder=n.ARROW_POINTING_UP=n.ARROW_POINTING_DOWN=void 0;var r,o=t("preact"),i=(r=t("./components/adder-toolbar"))&&r.__esModule?r:{default:r},s=t("./util/shadow-root");function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.ARROW_POINTING_DOWN=1;function u(t){return t.toString()+"px"}n.ARROW_POINTING_UP=2;var l=function(){function t(e,n){var r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._container=e,this._shadowRoot=(0,s.createShadowRoot)(e),Object.assign(e.style,{display:"block",position:"absolute",top:0,zIndex:999}),this._view=e.ownerDocument.defaultView,this._width=function(){return r._shadowRoot.firstChild.getBoundingClientRect().width},this._height=function(){return r._shadowRoot.firstChild.getBoundingClientRect().height},this._isVisible=!1,this._arrowDirection="up",this._onAnnotate=n.onAnnotate,this._onHighlight=n.onHighlight,this._onShowAnnotations=n.onShowAnnotations,this.annotationsForSelection=[],this._render()}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"hide",value:function(){this._isVisible=!1,this._render()}},{key:"target",value:function(t,e){var n,r,o;n=e?1:2;var i=Math.min(20,t.width);return o=e?t.left-this._width()/2+i:t.left+t.width-this._width()/2-i,t.top-this._height()<0&&1===n?n=2:t.top+this._height()>this._view.innerHeight&&(n=1),r=2===n?t.top+t.height+10:t.top-this._height()-10,o=Math.max(o,0),o=Math.min(o,this._view.innerWidth-this._width()),r=Math.max(r,0),{top:r=Math.min(r,this._view.innerHeight-this._height()),left:o,arrowDirection:n}}},{key:"showAt",value:function(t,e,n){var r=function(t){for(var e=t.parentElement;e.parentElement&&"static"===getComputedStyle(e).position;)e=e.parentElement;return e}(this._container).getBoundingClientRect();Object.assign(this._container.style,{top:u(e-r.top),left:u(t-r.left)}),this._isVisible=!0,this._arrowDirection=2===n?"up":"down",this._render()}},{key:"_render",value:function(){var t=this;(0,o.render)((0,o.createElement)(i.default,{isVisible:this._isVisible,arrowDirection:this._arrowDirection,onCommand:function(e){switch(e){case"annotate":t._onAnnotate(),t.hide();break;case"highlight":t._onHighlight(),t.hide();break;case"show":t._onShowAnnotations(t.annotationsForSelection)}},annotationCount:this.annotationsForSelection.length}),this._shadowRoot)}}]),t}();n.Adder=l},{"./components/adder-toolbar":53,"./util/shadow-root":82,preact:35}],44:[function(t,e,n){var r,o,i,s,a;a=t("./types"),r=a.RangeAnchor,o=a.TextPositionAnchor,i=a.TextQuoteAnchor,s=function(t,e,n,r){return new Promise((function(o,i){try{return o(t.fromSelector(e,n,r).toRange(r))}catch(t){return i(t)}}))},n.anchor=function(t,e,n){var a,u,l,c,f,h,d,p,g;for(null==n&&(n={}),c=null,h=null,d=null,a=0,u=(p=null!=e?e:[]).length;a<u;a++)switch((g=p[a]).type){case"TextPositionSelector":c=g,n.hint=c.start;break;case"TextQuoteSelector":h=g;break;case"RangeSelector":d=g}return l=function(t){if(null!=(null!=h?h.exact:void 0)&&t.toString()!==h.exact)throw new Error("quote mismatch");return t},f=Promise.reject("unable to anchor"),null!=d&&(f=f.catch((function(){return s(r,t,d,n).then(l)}))),null!=c&&(f=f.catch((function(){return s(o,t,c,n).then(l)}))),null!=h&&(f=f.catch((function(){return s(i,t,h,n)}))),f},n.describe=function(t,e,n){var s,a,u;return null==n&&(n={}),u=[r,o,i],function(){var r,o,i;for(i=[],r=0,o=u.length;r<o;r++){a=u[r];try{s=a.fromRange(t,e,n),i.push(s.toSelector(n))}catch(t){continue}}return i}()}},{"./types":48}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.anchor=function(t,e){var n=e.find((function(t){return"TextPositionSelector"===t.type})),r=e.find((function(t){return"TextQuoteSelector"===t.type})),o=Promise.reject("unable to anchor");return n&&(o=o.catch((function(){return S(n.start).then((function(e){var o=e.index,i=e.offset,s=e.textContent,u=n.start-i,l=n.end-i,c=l-u;!function(t){if(r&&r.exact!==t.toString())throw new Error("quote mismatch")}(s.substr(u,c));var f=new a.TextPositionAnchor(t,u,l);return g(o,f)}))}))),r&&(o=o.catch((function(){if(n&&b[r.exact]&&b[r.exact][n.start]){var t=b[r.exact][n.start],e=t.pageIndex,o=t.anchor;return g(e,o)}return function(t){var e=PDFViewerApplication.pdfViewer.pagesCount,n=Array(e).fill(0).map((function(t,e){return e}));return t?S(t.start).then((function(t){return function(t){for(var e=n.slice(0,t),r=n.slice(t),o=[];e.length>0||r.length>0;)r.length&&o.push(r.shift()),e.length&&o.push(e.pop());return o}(t.index)})):Promise.resolve(n)}(n).then((function(t){return function t(e,n,r){if(0===e.length)return Promise.reject(new Error("Quote not found"));var o=function(t){return p(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||f()}(e),i=o[0],s=o.slice(1),u=v(i),l=x(i);return Promise.all([u,l]).then((function(t){var e=function(t,e){return p(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(t,e)||h(t,e)||f()}(t,2),o=e[0],i=e[1],s={textContent:o},u=a.TextQuoteAnchor.fromSelector(s,n);if(r){var l=r.start-i;return l=Math.max(0,l),l=Math.min(l,o.length),u.toPositionAnchor({hint:l})}return u.toPositionAnchor()})).then((function(t){return r&&(b[n.exact]||(b[n.exact]={}),b[n.exact][r.start]={pageIndex:i,anchor:t}),g(i,t)})).catch((function(){return t(s,n,r)}))}(t,r,n)}))}))),o},n.describe=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new i.default.BrowserRange(e).normalize(),s=E(o.start),u=E(o.end);if(s!==u)return Promise.reject(new Error("selecting across page breaks is not supported"));var l=o.limit(s),c=o.limit(u),f=w(s.parentNode),h=y.call(document,s,NodeFilter.SHOW_TEXT),d=(0,r.default)(h,o.start),p=(0,r.default)(h,o.end)+d+o.end.textContent.length;return x(f).then((function(e){d+=e,p+=e;var r=new a.TextPositionAnchor(t,d,p).toSelector(n),o=document.createRange();o.setStartBefore(l.start),o.setEndAfter(c.end);var i=a.TextQuoteAnchor.fromRange(t,o,n).toSelector(n);return Promise.all([r,i])}))},n.purgeCache=function(){_={},b={}};var r=u(t("dom-seek")),o=u(t("../pdfjs-rendering-states")),i=u(t("./range")),s=t("./text-position"),a=t("./types");function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function c(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t){if(Array.isArray(t))return t}var g=function(t,e){return l(m(t),(function(t){var n=!1;if(t.textLayer&&(n=t.textLayer.renderingDone),t.renderingState===o.default.FINISHED&&n){var r=t.textLayer.textLayerDiv;return(0,s.toRange)(r,e.start,e.end)}var i=t.div||t.el,a=i.getElementsByClassName("annotator-placeholder")[0];a||((a=document.createElement("span")).classList.add("annotator-placeholder"),a.textContent="Loading annotations…",i.appendChild(a));var u=document.createRange();return u.setStartBefore(a),u.setEndAfter(a),u}))},v=c((function(t){return _[t]||(_[t]=function(t){return l(m(t),(function(t){return l(t.pdfPage.getTextContent({normalizeWhitespace:!0}),(function(t){return t.items.filter((function(t){return/\S/.test(t.str)})).map((function(t){return t.str})).join("")}))}))}(t)),_[t]})),m=c((function(t){var e=PDFViewerApplication.pdfViewer,n=e.getPageView(t);return function(t,e){var n=t();return n&&n.then?n.then(e):e(n)}((function(){if(!n||!n.pdfPage)return l(new Promise((function(n){document.addEventListener("pagesloaded",(function r(){document.removeEventListener("pagesloaded",r),n(e.getPageView(t))}))})),(function(t){n=t}))}),(function(){return n}))})),y=t("dom-node-iterator/polyfill")(),_={},b={};function w(t){return Array.from(t.parentNode.childNodes).indexOf(t)}function E(t){for(;!t.classList||!t.classList.contains("page");)t=t.parentNode;return t.getElementsByClassName("textLayer")[0]}function x(t){var e=-1;return function n(r){return++e===t?Promise.resolve(r):v(e).then((function(t){return n(r+t.length)}))}(0)}function S(t){var e=0,n=0;return v(0).then((function r(o){var i=PDFViewerApplication.pdfViewer.pagesCount-1;return n+o.length>t||e===i?(t=n,Promise.resolve({index:e,offset:t,textContent:o})):(++e,n+=o.length,v(e).then(r))}))}},{"../pdfjs-rendering-states":68,"./range":46,"./text-position":47,"./types":48,"dom-node-iterator/polyfill":28,"dom-seek":29}],46:[function(t,e,n){var r,o,i,s={}.hasOwnProperty;r=t("jquery"),i=t("./util"),(o={}).sniff=function(t){return null!=t.commonAncestorContainer?new o.BrowserRange(t):"string"==typeof t.start?new o.SerializedRange(t):t.start&&"object"==typeof t.start?new o.NormalizedRange(t):(console.error("Could not sniff range type"),!1)},o.nodeFromXPath=function(t,e){var n,o,s,a,u;return null==e&&(e=document),o=function(t,n){null==n&&(n=null);try{return document.evaluate("."+t,e,n,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(n){return console.log("XPath evaluation failed."),console.log("Trying fallback..."),i.nodeFromXPath(t,e)}},r.isXMLDoc(document.documentElement)?(n=document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement),(a=o(t,n))||(t=function(){var e,n,r,o;for(o=[],e=0,n=(r=t.split("/")).length;e<n;e++)(u=r[e])&&-1===u.indexOf(":")?o.push(u.replace(/^([a-z]+)/,"xhtml:$1")):o.push(u);return o}().join("/"),s=document.lookupNamespaceURI(null),a=o(t,n=function(t){return"xhtml"===t?s:document.documentElement.getAttribute("xmlns:"+t)})),a):o(t)},o.RangeError=function(t){function e(t,n,r){this.type=t,this.message=n,this.parent=null!=r?r:null,e.__super__.constructor.call(this,this.message)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Error),e}(),o.BrowserRange=function(){function t(t){this.commonAncestorContainer=t.commonAncestorContainer,this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,r,s;if(this.tainted)return console.error("You may only call normalize() once on a BrowserRange!"),!1;if(this.tainted=!0,s={},this.startContainer.nodeType===Node.ELEMENT_NODE?(this.startOffset<this.startContainer.childNodes.length?s.start=i.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]):s.start=i.getFirstTextNodeNotBefore(this.startContainer),s.startOffset=0):(s.start=this.startContainer,s.startOffset=this.startOffset),this.endContainer.nodeType===Node.ELEMENT_NODE){if(null!=(n=this.endContainer.childNodes[this.endOffset])){for(e=n;null!=e&&e.nodeType!==Node.TEXT_NODE;)e=e.firstChild;null!=e&&(s.end=e,s.endOffset=0)}null==s.end&&(n=this.endOffset?this.endContainer.childNodes[this.endOffset-1]:this.endContainer.previousSibling,s.end=i.getLastTextNodeUpTo(n),s.endOffset=s.end.nodeValue.length)}else s.end=this.endContainer,s.endOffset=this.endOffset;for(r={},s.startOffset>0?!s.start.nextSibling||s.start.nodeValue.length>s.startOffset?r.start=s.start.splitText(s.startOffset):r.start=s.start.nextSibling:r.start=s.start,s.start===s.end?(r.start.nodeValue.length>s.endOffset-s.startOffset&&r.start.splitText(s.endOffset-s.startOffset),r.end=r.start):(s.end.nodeValue.length>s.endOffset&&s.end.splitText(s.endOffset),r.end=s.end),r.commonAncestor=this.commonAncestorContainer;r.commonAncestor.nodeType!==Node.ELEMENT_NODE;)r.commonAncestor=r.commonAncestor.parentNode;return new o.NormalizedRange(r)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t}(),o.NormalizedRange=function(){function t(t){this.commonAncestor=t.commonAncestor,this.start=t.start,this.end=t.end}return t.prototype.normalize=function(t){return this},t.prototype.limit=function(t){var e,n,o,i,s,a;if(!(o=r.grep(this.textNodes(),(function(e){return e.parentNode===t||r.contains(t,e.parentNode)}))).length)return null;for(this.start=o[0],this.end=o[o.length-1],a=r(this.start).parents(),e=0,n=(s=r(this.end).parents()).length;e<n;e++)if(i=s[e],-1!==a.index(i)){this.commonAncestor=i;break}return this},t.prototype.serialize=function(t,e){var n,s,a;return a=(s=function(n,o){var s,a,u,l,c,f,h;for(c=e?r(n).parents(":not("+e+")").eq(0):r(n).parent(),h=i.xpathFromNode(c,t)[0],l=0,s=0,a=(u=(f=i.getTextNodes(c)).slice(0,f.index(n))).length;s<a;s++)l+=u[s].nodeValue.length;return o?[h,l+n.nodeValue.length]:[h,l]})(this.start),n=s(this.end,!0),new o.SerializedRange({start:a[0],end:n[0],startOffset:a[1],endOffset:n[1]})},t.prototype.text=function(){var t;return function(){var e,n,r,o;for(o=[],e=0,n=(r=this.textNodes()).length;e<n;e++)t=r[e],o.push(t.nodeValue);return o}.call(this).join("")},t.prototype.textNodes=function(){var t,e,n,o;return n=(e=[(o=i.getTextNodes(r(this.commonAncestor))).index(this.start),o.index(this.end)])[0],t=e[1],r.makeArray(o.slice(n,+t+1||9e9))},t.prototype.toRange=function(){var t;return(t=document.createRange()).setStartBefore(this.start),t.setEndAfter(this.end),t},t}(),o.SerializedRange=function(){function t(t){this.start=t.start,this.startOffset=t.startOffset,this.end=t.end,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,s,a,u,l,c,f,h,d,p,g,v,m;for(d={},s=0,u=(p=["start","end"]).length;s<u;s++){h=p[s];try{f=o.nodeFromXPath(this[h],t)}catch(t){throw n=t,new o.RangeError(h,"Error while finding "+h+" node: "+this[h]+": "+n,n)}if(!f)throw new o.RangeError(h,"Couldn't find "+h+" node: "+this[h]);for(c=0,v=this[h+"Offset"],"end"===h&&v--,a=0,l=(g=i.getTextNodes(r(f))).length;a<l;a++){if(c+(m=g[a]).nodeValue.length>v){d[h+"Container"]=m,d[h+"Offset"]=this[h+"Offset"]-c;break}c+=m.nodeValue.length}if(null==d[h+"Offset"])throw new o.RangeError(h+"offset","Couldn't find offset "+this[h+"Offset"]+" in element "+this[h])}return e=null==document.compareDocumentPosition?function(t,e){return t.contains(e)}:function(t,e){return 16&t.compareDocumentPosition(e)},r(d.startContainer).parents().each((function(){if(e(this,d.endContainer))return d.commonAncestorContainer=this,!1})),new o.BrowserRange(d).normalize(t)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}},t}(),e.exports=o},{"./util":49,jquery:"jquery"}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toRange=function(t,e,n){for(var r,o,i,s,a,u=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1),l=0;(a=u.nextNode())&&(!r||!i);){var c=a.nodeValue;!r&&e>=l&&e<=l+c.length&&(r=a,o=e-l),!i&&n>=l&&n<=l+c.length&&(i=a,s=n-l),l+=c.length}if(!r)throw new Error("invalid start offset");if(!i)throw new Error("invalid end offset");var f=t.ownerDocument.createRange();return f.setStart(r,o),f.setEnd(i,s),f}},{}],48:[function(t,e,n){var r,o,i,s,a,u,l;s=t("dom-anchor-text-position"),a=t("dom-anchor-text-quote"),l=t("./range"),u=function(t){throw new Error('missing required parameter "'+t+'"')},r=function(){function t(t,e){null==t&&u("root"),null==e&&u("range"),this.root=t,this.range=l.sniff(e).normalize(this.root)}return t.fromRange=function(e,n){return new t(e,n)},t.fromSelector=function(e,n){var r;return r={start:n.startContainer,startOffset:n.startOffset,end:n.endContainer,endOffset:n.endOffset},new t(e,new l.SerializedRange(r))},t.prototype.toRange=function(){return this.range.toRange()},t.prototype.toSelector=function(t){var e;return null==t&&(t={}),{type:"RangeSelector",startContainer:(e=this.range.serialize(this.root,t.ignoreSelector)).start,startOffset:e.startOffset,endContainer:e.end,endOffset:e.endOffset}},t}(),o=function(){function t(t,e,n){this.root=t,this.start=e,this.end=n}return t.fromRange=function(e,n){var r;return r=s.fromRange(e,n),t.fromSelector(e,r)},t.fromSelector=function(e,n){return new t(e,n.start,n.end)},t.prototype.toSelector=function(){return{type:"TextPositionSelector",start:this.start,end:this.end}},t.prototype.toRange=function(){return s.toRange(this.root,{start:this.start,end:this.end})},t}(),i=function(){function t(t,e,n){null==n&&(n={}),this.root=t,this.exact=e,this.context=n}return t.fromRange=function(e,n,r){var o;return o=a.fromRange(e,n,r),t.fromSelector(e,o)},t.fromSelector=function(e,n){var r,o;return r=n.prefix,o=n.suffix,new t(e,n.exact,{prefix:r,suffix:o})},t.prototype.toSelector=function(){return{type:"TextQuoteSelector",exact:this.exact,prefix:this.context.prefix,suffix:this.context.suffix}},t.prototype.toRange=function(t){var e;if(null==t&&(t={}),null===(e=a.toRange(this.root,this.toSelector(),t)))throw new Error("Quote not found");return e},t.prototype.toPositionAnchor=function(t){var e;if(null==t&&(t={}),null===(e=a.toTextPosition(this.root,this.toSelector(),t)))throw new Error("Quote not found");return new o(this.root,e.start,e.end)},t}(),n.RangeAnchor=r,n.TextPositionAnchor=o,n.TextQuoteAnchor=i},{"./range":46,"dom-anchor-text-position":6,"dom-anchor-text-quote":9}],49:[function(t,e,n){var r,o,i,s,a;r=t("jquery"),i=t("./xpath"),s=i.simpleXPathJQuery,a=i.simpleXPathPure,(o={}).flatten=function(t){var e;return(e=function(t){var n,o,i,s;for(o=[],i=0,s=t.length;i<s;i++)n=t[i],o=o.concat(n&&r.isArray(n)?e(n):n);return o})(t)},o.getTextNodes=function(t){var e;return e=function(t){var n;if(t&&t.nodeType!==Node.TEXT_NODE){if(n=[],t.nodeType!==Node.COMMENT_NODE)for(t=t.lastChild;t;)n.push(e(t)),t=t.previousSibling;return n.reverse()}return t},t.map((function(){return o.flatten(e(this))}))},o.getLastTextNodeUpTo=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.lastChild&&null!=(e=o.getLastTextNodeUpTo(t.lastChild)))return e}return null!=(t=t.previousSibling)?o.getLastTextNodeUpTo(t):null},o.getFirstTextNodeNotBefore=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.firstChild&&null!=(e=o.getFirstTextNodeNotBefore(t.firstChild)))return e}return null!=(t=t.nextSibling)?o.getFirstTextNodeNotBefore(t):null},o.xpathFromNode=function(t,e){var n;try{n=s.call(t,e)}catch(r){console.log("jQuery-based XPath construction failed! Falling back to manual."),n=a.call(t,e)}return n},o.nodeFromXPath=function(t,e){var n,r,o,i,s,a,u;for(s=e,n=0,o=(u=t.substring(1).split("/")).length;n<o;n++)i=(a=u[n].split("["))[0],r=null!=(r=a[1])?parseInt((null!=r?r.split("]"):void 0)[0]):1,s=findChild(s,i.toLowerCase(),r);return s},e.exports={nodeFromXPath:o.nodeFromXPath,xpathFromNode:o.xpathFromNode,getTextNodes:o.getTextNodes,getFirstTextNodeNotBefore:o.getFirstTextNodeNotBefore,getLastTextNodeUpTo:o.getLastTextNodeUpTo}},{"./xpath":50,jquery:"jquery"}],50:[function(t,e,n){var r,o,i,s,a;r=t("jquery"),s=function(t){return this.map((function(){var e,n,o,i;for(o="",e=this;(null!=e?e.nodeType:void 0)===Node.ELEMENT_NODE&&e!==t;)i=e.tagName.replace(":","\\:"),n="["+(n=r(e.parentNode).children(i).index(e)+1)+"]",o="/"+e.tagName.toLowerCase()+n+o,e=e.parentNode;return o})).get()},a=function(t){var e,n,r;return e=function(t){return o(t)+"["+i(t)+"]"},r=t,n=function(t){var n;for(n="";t!==r;){if(null==t)throw new Error("Called getPathTo on a node which was not a descendant of @rootNode. "+r);n=e(t)+"/"+n,t=t.parentNode}return(n="/"+n).replace(/\/$/,"")},this.map((function(){return n(this)})).get()},o=function(t){var e;switch(e=t.nodeName.toLowerCase()){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return e}},i=function(t){var e,n;for(e=0,n=t;n;)n.nodeName===t.nodeName&&e++,n=n.previousSibling;return e},e.exports={simpleXPathJQuery:s,simpleXPathPure:a}},{jquery:"jquery"}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){e.on(o.default.PUBLIC_ANNOTATION_COUNT_CHANGED,(function(e){var n=t.querySelectorAll("[data-hypothesis-annotation-count]");Array.from(n).forEach((function(t){t.textContent=e}))}))};var r,o=(r=t("../shared/bridge-events"))&&r.__esModule?r:{default:r}},{"../shared/bridge-events":92}],52:[function(t,e,n){"use strict";function r(t,e){var n=this;if(this.bridge=t,!e.on)throw new Error("options.on unspecified for AnnotationSync.");if(!e.emit)throw new Error("options.emit unspecified for AnnotationSync.");this.cache={},this._on=e.on,this._emit=e.emit,Object.keys(this._eventListeners).forEach((function(t){var e=n._eventListeners[t];n._on(t,(function(t){e.apply(n,[t])}))})),Object.keys(this._channelListeners).forEach((function(t){n.bridge.on(t,(function(e,r){n._channelListeners[t].apply(n,[e,r])}))}))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.cache=null,r.prototype.sync=function(t){var e;return t=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._format(t[e]));return n}.call(this),this.bridge.call("sync",t,(e=this,function(t,n){var r,o=[];for(n=n||[],r=0;r<n.length;r++)o.push(e._parse(n[r]));return o})),this},r.prototype._channelListeners={deleteAnnotation:function(t,e){var n=this._parse(t);delete this.cache[n.$tag],this._emit("annotationDeleted",n),e(null,this._format(n))},loadAnnotations:function(t,e){var n=function(){var e,n=[];for(e=0;e<t.length;e++)n.push(this._parse(t[e]));return n}.call(this);return this._emit("annotationsLoaded",n),e(null,n)}},r.prototype._eventListeners={beforeAnnotationCreated:function(t){if(!t.$tag)return this._mkCallRemotelyAndParseResults("beforeCreateAnnotation")(t)}},r.prototype._mkCallRemotelyAndParseResults=function(t,e){return n=this,function(r){n.bridge.call(t,n._format(r),(function(t,r){null===t&&n._parseResults(r),"function"==typeof e&&e(t,r)}))};var n},r.prototype._parseResults=function(t){var e,n,r,o;for(r=0;r<t.length;r++)for(e=t[r],e=[].concat(e),o=0;o<e.length;o++)null!==(n=e[o])&&this._parse(n)},r.prototype._tag=function(t,e){return t.$tag||(e=e||window.btoa(Math.random()),Object.defineProperty(t,"$tag",{value:e}),this.cache[e]=t),t},r.prototype._parse=function(t){var e=Object.assign(this.cache[t.tag]||{},t.msg);return this._tag(e,t.tag)},r.prototype._format=function(t){return this._tag(t),{tag:t.$tag,msg:t}}},{}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=u(t("classnames")),o=t("preact"),i=u(t("prop-types")),s=t("../../shared/shortcut"),a=u(t("../../shared/components/svg-icon"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=t.badgeCount,n=t.icon,r=t.label,i=t.onClick,u=t.shortcut;(0,s.useShortcut)(u,i);var l=u?"".concat(r," (").concat(u,")"):r;return(0,o.createElement)("button",{className:"annotator-adder-actions__button",onClick:i,"aria-label":l,title:l},n&&(0,o.createElement)(a.default,{name:n,className:"annotator-adder-actions__icon"}),"number"==typeof e&&(0,o.createElement)("span",{className:"annotator-adder-actions__badge"},e),(0,o.createElement)("span",{className:"annotator-adder-actions__label"},r))}function c(t){var e=t.arrowDirection,n=t.isVisible,i=t.onCommand,s=t.annotationCount,a=void 0===s?0:s,u=function(t,e){t.preventDefault(),t.stopPropagation(),i(e)},c=n?"a":null,f=n?"h":null,h=n?"s":null;return(0,o.createElement)("hypothesis-adder-toolbar",{class:(0,r.default)("annotator-adder",{"annotator-adder--arrow-down":"down"===e,"annotator-adder--arrow-up":"up"===e,"is-active":n}),style:{visibility:n?"visible":"hidden"}},(0,o.createElement)("hypothesis-adder-actions",{className:"annotator-adder-actions"},(0,o.createElement)(l,{icon:"annotate",onClick:function(t){return u(t,"annotate")},label:"Annotate",shortcut:c}),(0,o.createElement)(l,{icon:"highlight",onClick:function(t){return u(t,"highlight")},label:"Highlight",shortcut:f}),a>0&&(0,o.createElement)("div",{className:"annotator-adder-actions__separator"}),a>0&&(0,o.createElement)(l,{badgeCount:a,onClick:function(t){return u(t,"show")},label:"Show",shortcut:h})))}l.propTypes={badgeCount:i.default.number,icon:i.default.string,label:i.default.string.isRequired,onClick:i.default.func.isRequired,shortcut:i.default.string},c.propTypes={arrowDirection:i.default.oneOf(["up","down"]).isRequired,isVisible:i.default.bool.isRequired,onCommand:i.default.func.isRequired,annotationCount:i.default.number}},{"../../shared/components/svg-icon":95,"../../shared/shortcut":100,classnames:2,preact:35,"prop-types":38}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=a(t("classnames")),o=a(t("prop-types")),i=t("preact"),s=a(t("../../shared/components/svg-icon"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){var e=t.buttonRef,n=t.expanded,o=t.extraClasses,a=t.label,u=t.icon,l=t.onClick,c=t.selected;return(0,i.createElement)("button",{className:(0,r.default)("annotator-frame-button",o),"aria-label":a,"aria-expanded":n,"aria-pressed":c,onClick:function(t){t.stopPropagation(),l()},ref:e,title:a},(0,i.createElement)(s.default,{name:u}))}function l(t){var e=t.closeSidebar,n=t.createAnnotation,r=t.isSidebarOpen,o=t.newAnnotationType,s=t.showHighlights,a=t.toggleHighlights,l=t.toggleSidebar,c=t.toggleSidebarRef,f=t.useMinimalControls,h=void 0!==f&&f;return(0,i.createElement)("div",null,h&&r&&(0,i.createElement)(u,{extraClasses:"annotator-frame-button--sidebar_close",label:"Close annotation sidebar",icon:"cancel",onClick:e}),!h&&(0,i.createElement)(u,{extraClasses:"annotator-frame-button--sidebar_toggle",buttonRef:c,label:"Annotation sidebar",icon:r?"caret-right":"caret-left",expanded:r,onClick:l}),!h&&(0,i.createElement)(u,{label:"Show highlights",icon:s?"show":"hide",selected:s,onClick:a}),!h&&(0,i.createElement)(u,{label:"note"===o?"New page note":"New annotation",icon:"note"===o?"note":"annotate",onClick:n}))}u.propTypes={buttonRef:o.default.any,expanded:o.default.bool,extraClasses:o.default.string,label:o.default.string.isRequired,icon:o.default.string.isRequired,onClick:o.default.func.isRequired,selected:o.default.bool},l.propTypes={closeSidebar:o.default.func.isRequired,createAnnotation:o.default.func.isRequired,isSidebarOpen:o.default.bool.isRequired,newAnnotationType:o.default.oneOf(["annotation","note"]).isRequired,showHighlights:o.default.bool.isRequired,toggleHighlights:o.default.func.isRequired,toggleSidebar:o.default.func.isRequired,toggleSidebarRef:o.default.any,useMinimalControls:o.default.bool}},{"../../shared/components/svg-icon":95,classnames:2,preact:35,"prop-types":38}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return t.hasOwnProperty("hypothesisConfig")?"function"!=typeof t.hypothesisConfig?(console.warn("hypothesisConfig must be a function, see: https://h.readthedocs.io/projects/client/en/latest/publishers/config/#window.hypothesisConfig"),{}):t.hypothesisConfig():{}}},{}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,o.default)(t);return{annotations:e.annotations,assetRoot:e.hostPageSetting("assetRoot",{allowInBrowserExt:!0}),branding:e.hostPageSetting("branding"),clientUrl:e.clientUrl,enableExperimentalNewNoteButton:e.hostPageSetting("enableExperimentalNewNoteButton"),group:e.group,focus:e.hostPageSetting("focus"),theme:e.hostPageSetting("theme"),usernameUrl:e.hostPageSetting("usernameUrl"),onLayoutChange:e.hostPageSetting("onLayoutChange"),openSidebar:e.hostPageSetting("openSidebar",{allowInBrowserExt:!0,coerce:i.toBoolean}),query:e.query,requestConfigFromFrame:e.hostPageSetting("requestConfigFromFrame"),services:e.hostPageSetting("services"),showHighlights:e.showHighlights,sidebarAppUrl:e.sidebarAppUrl,subFrameIdentifier:e.hostPageSetting("subFrameIdentifier",{allowInBrowserExt:!0}),externalContainerSelector:e.hostPageSetting("externalContainerSelector")}};var r,o=(r=t("./settings"))&&r.__esModule?r:{default:r},i=t("../../shared/type-coercions")},{"../../shared/type-coercions":101,"./settings":58}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return!(t.startsWith("http://")||t.startsWith("https://"))}},{}],58:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=o.jsonConfigsFrom(t.document),n=(0,i.default)(t);function r(){var e=t.document.querySelector('link[type="application/annotator+html"][rel="sidebar"]');if(!e)throw new Error('No application/annotator+html (rel="sidebar") link in the document');if(!e.href)throw new Error('application/annotator+html (rel="sidebar") link has no href');return e.href}function a(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.allowInBrowserExt||!1,a=void 0!==o.defaultValue,u="function"==typeof o.coerce?o.coerce:function(t){return t};return!i&&(0,s.default)(r())?a?o.defaultValue:null:n.hasOwnProperty(t)?u(n[t]):e.hasOwnProperty(t)?u(e[t]):a?o.defaultValue:null}return{get annotations(){return e.annotations||((n=t.location.href.match(/#annotations:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get clientUrl(){return function(){var e=t.document.querySelector('link[type="application/annotator+javascript"][rel="hypothesis-client"]');if(!e)throw new Error('No application/annotator+javascript (rel="hypothesis-client") link in the document');if(!e.href)throw new Error('application/annotator+javascript (rel="hypothesis-client") link has no href');return e.href}()},get group(){return e.group||((n=t.location.href.match(/#annotations:group:([A-Za-z0-9_-]+)$/))?n[1]:null);var n},get showHighlights(){return null===(t=a("showHighlights"))&&(t="always"),"boolean"==typeof t?t?"always":"never":t;var t},get sidebarAppUrl(){return r()},get query(){return e.query||function(){var e=t.location.href.match(/#annotations:(query|q):(.+)$/i);if(e)try{return decodeURIComponent(e[2])}catch(t){}return null}()},hostPageSetting:a}};var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=o?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("../../shared/settings")),i=a(t("./config-func-settings-from")),s=a(t("./is-browser-extension"));function a(t){return t&&t.__esModule?t:{default:t}}function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}},{"../../shared/settings":99,"./config-func-settings-from":55,"./is-browser-extension":57}],59:[function(t,e,n){var r,o,i,s,a=[].slice,u={}.hasOwnProperty;r=t("jquery"),e.exports=o=function(){function t(t,e){this.options=r.extend(!0,{},this.options,e),this.element=r(t),this._closures={},this.on=this.subscribe,this.addEvents()}return t.prototype.events={},t.prototype.options={},t.prototype.element=null,t.prototype.destroy=function(){return this.removeEvents()},t.prototype.addEvents=function(){var e,n,r,o,i;for(i=[],n=0,r=(o=t._parseEvents(this.events)).length;n<r;n++)e=o[n],i.push(this._addEvent(e.selector,e.event,e.functionName));return i},t.prototype.removeEvents=function(){var e,n,r,o,i;for(i=[],n=0,r=(o=t._parseEvents(this.events)).length;n<r;n++)e=o[n],i.push(this._removeEvent(e.selector,e.event,e.functionName));return i},t.prototype._addEvent=function(e,n,r){var o,i;return i=this,o=function(){return i[r].apply(i,arguments)},""===e&&t._isCustomEvent(n)?this.subscribe(n,o):this.element.delegate(e,n,o),this._closures[e+"/"+n+"/"+r]=o,this},t.prototype._removeEvent=function(e,n,r){var o;return o=this._closures[e+"/"+n+"/"+r],""===e&&t._isCustomEvent(n)?this.unsubscribe(n,o):this.element.undelegate(e,n,o),delete this._closures[e+"/"+n+"/"+r],this},t.prototype.publish=function(){return this.element.triggerHandler.apply(this.element,arguments),this},t.prototype.subscribe=function(t,e){var n;return(n=function(){return e.apply(this,[].slice.call(arguments,1))}).guid=e.guid=r.guid+=1,this.element.bind(t,n),this},t.prototype.unsubscribe=function(){return this.element.unbind.apply(this.element,arguments),this},t}(),o._parseEvents=function(t){var e,n,r,o,i,s,u;for(s in n=[],t)r=t[s],u=2<=(i=s.split(" ")).length?a.call(i,0,o=i.length-1):(o=0,[]),e=i[o++],n.push({selector:u.join(" "),event:e,functionName:r});return n},o.natives=(s=function(){var t,e;for(i in e=[],t=r.event.special)u.call(t,i)&&(t[i],e.push(i));return e}(),"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error touchstart".split(/[^a-z]+/).concat(s)),o._isCustomEvent=function(t){return t=t.split(".")[0],-1===r.inArray(t,o.natives)}},{jquery:"jquery"}],60:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("../shared/bridge-events")),o=i(t("../shared/warn-once"));function i(t){return t&&t.__esModule?t:{default:t}}var s={},a=function(t){s=t||{}},u={init:function(t){t.on(r.default.FEATURE_FLAGS_UPDATED,a)},reset:function(){a({})},flagEnabled:function(t){return t in s?s[t]:((0,o.default)("looked up unknown feature",t),!1)}};n.default=u},{"../shared/bridge-events":92,"../shared/warn-once":102}],61:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.DEBOUNCE_WAIT=void 0;var o,i=(o=t("lodash.debounce"))&&o.__esModule?o:{default:o},s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=o?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("./util/frame-util"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.DEBOUNCE_WAIT=40;var f=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._target=e,this._handledFrames=[],this._mutationObserver=new MutationObserver((0,i.default)((function(){n._discoverFrames()}),40))}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"observe",value:function(t,e){this._onFrameAdded=t,this._onFrameRemoved=e,this._discoverFrames(),this._mutationObserver.observe(this._target,{childList:!0,subtree:!0})}},{key:"disconnect",value:function(){this._mutationObserver.disconnect()}},{key:"_addFrame",value:function(t){var e=this;s.isAccessible(t)&&s.isDocumentReady(t,(function(){t.contentWindow.addEventListener("unload",(function(){e._removeFrame(t)})),e._handledFrames.push(t),e._onFrameAdded(t)}))}},{key:"_removeFrame",value:function(t){this._onFrameRemoved(t),this._handledFrames=this._handledFrames.filter((function(e){return e!==t}))}},{key:"_discoverFrames",value:function(){var t,e=s.findFrames(this._target),n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._handledFrames.includes(r)||this._addFrame(r)}}catch(t){n.e(t)}finally{n.f()}var o,i=u(function(t,e){return t.filter((function(t){return!e.includes(t)}))}(this._handledFrames,e));try{for(i.s();!(o=i.n()).done;){var a=o.value;this._removeFrame(a)}}catch(t){i.e(t)}finally{i.f()}}}]),t}();n.default=f},{"./util/frame-util":80,"lodash.debounce":34}],62:[function(t,e,n){var r,o,i,s,a,u,l,c,f,h,d,p,g,v,m={}.hasOwnProperty,y=[].slice,_=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};p=t("scroll-into-view"),o=t("custom-event"),i=t("./delegator"),r=t("jquery"),s=t("./adder"),f=t("./anchoring/html"),c=t("./highlighter"),d=t("./range-util"),g=t("./selections").default,v=t("./anchoring/range"),l=t("../shared/dom-element").closest,h=t("./util/url").normalizeURI,a=function(t){return new Promise((function(e,n){return requestAnimationFrame((function(){try{return e(t())}catch(t){return n(t)}}))}))},u=function(){var t;return t=window.getSelection().getRangeAt(0),d.itemsForRange(t,(function(t){return r(t).data("annotation")}))},e.exports=function(t){function e(t,n,o){var i,a,u,l,c,h;for(a in null==o&&(o=f),e.__super__.constructor.apply(this,arguments),this.adder=r(this.html.adder).appendTo(this.element).hide(),c=this,this.adderCtrl=new s.Adder(this.adder[0],{onAnnotate:function(){return c.createAnnotation(),document.getSelection().removeAllRanges()},onHighlight:function(){return c.setVisibleHighlights(!0),c.createHighlight(),document.getSelection().removeAllRanges()},onShowAnnotations:function(t){return c.selectAnnotations(t)}}),this.selections=g(document).subscribe({next:function(t){return t?c._onSelection(t):c._onClearSelection()}}),this.plugins={},this.anchors=[],this.frameIdentifier=n.subFrameIdentifier||null,this.anchoring=o,i={config:n,on:(h=this,function(t,e){return h.subscribe(t,e)}),emit:function(t){return function(){var e,n;return n=arguments[0],e=2<=arguments.length?y.call(arguments,1):[],t.publish(n,e)}}(this)},this.addPlugin("CrossFrame",i),this.crossframe=this.plugins.CrossFrame,this.crossframe.onConnect(function(t){return function(){return t._setupInitialState(n)}}(this)),this._connectAnnotationSync(this.crossframe),this._connectAnnotationUISync(this.crossframe),l=this.options)m.call(l,a)&&(u=l[a],!this.plugins[a]&&this.options.pluginClasses[a]&&this.addPlugin(a,u))}return function(t,e){for(var n in e)m.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,i),e.prototype.events={".hypothesis-highlight click":"onHighlightClick",".hypothesis-highlight mouseover":"onHighlightMouseover",".hypothesis-highlight mouseout":"onHighlightMouseout",click:"onElementClick",touchstart:"onElementTouchStart"},e.prototype.options={Document:{},TextSelection:{}},e.prototype.anchoring=null,e.prototype.plugins=null,e.prototype.anchors=null,e.prototype.visibleHighlights=!1,e.prototype.frameIdentifier=null,e.prototype.html={adder:"<hypothesis-adder></hypothesis-adder>"},e.prototype.addPlugin=function(t,e){var n,r;return this.plugins[t]?console.error("You cannot have more than one instance of any plugin."):"function"==typeof(r=this.options.pluginClasses[t])?(this.plugins[t]=new r(this.element[0],e),this.plugins[t].annotator=this,"function"==typeof(n=this.plugins[t]).pluginInit&&n.pluginInit()):console.error("Could not load "+t+" plugin. Have you included the appropriate <script> tag?"),this},e.prototype.getDocumentInfo=function(){var t,e,n;return null!=this.plugins.PDF?(t=Promise.resolve(this.plugins.PDF.getMetadata()),e=Promise.resolve(this.plugins.PDF.uri())):null!=this.plugins.Document?(e=Promise.resolve(this.plugins.Document.uri()),t=Promise.resolve(this.plugins.Document.metadata)):(e=Promise.reject(),t=Promise.reject()),e=e.catch((function(){return decodeURIComponent(window.location.href)})),t=t.catch((function(){return{title:document.title,link:[{href:decodeURIComponent(window.location.href)}]}})),Promise.all([t,e]).then((n=this,function(t){var e,r;return r=t[0],e=t[1],{uri:h(e),metadata:r,frameIdentifier:n.frameIdentifier}}))},e.prototype._setupInitialState=function(t){return this.publish("panelReady"),this.setVisibleHighlights("always"===t.showHighlights)},e.prototype._connectAnnotationSync=function(t){var e;return this.subscribe("annotationDeleted",(e=this,function(t){return e.detach(t)})),this.subscribe("annotationsLoaded",function(t){return function(e){var n,r,o,i;for(i=[],r=0,o=e.length;r<o;r++)n=e[r],i.push(t.anchor(n));return i}}(this))},e.prototype._connectAnnotationUISync=function(t){var e;return t.on("focusAnnotations",(e=this,function(t){var n,o,i,s,a,u,l;for(null==t&&(t=[]),u=[],o=0,i=(s=e.anchors).length;o<i;o++)null!=(n=s[o]).highlights&&(a=n.annotation.$tag,l=_.call(t,a)>=0,u.push(r(n.highlights).toggleClass("hypothesis-highlight-focused",l)));return u})),t.on("scrollToAnnotation",function(t){return function(e){var n,r,i,s,a,u;for(u=[],i=0,s=(a=t.anchors).length;i<s;i++)null!=(n=a[i]).highlights&&(n.annotation.$tag===e?(r=new o("scrolltorange",{bubbles:!0,cancelable:!0,detail:n.range}),t.element[0].dispatchEvent(r)?u.push(p(n.highlights[0])):u.push(void 0)):u.push(void 0));return u}}(this)),t.on("getDocumentInfo",function(t){return function(e){return t.getDocumentInfo().then((function(t){return e(null,t)})).catch((function(t){return e(t)}))}}(this)),t.on("setVisibleHighlights",function(t){return function(e){return t.setVisibleHighlights(e)}}(this))},e.prototype.destroy=function(){var t,n;for(t in r("#annotator-dynamic-style").remove(),this.selections.unsubscribe(),this.adder.remove(),this.element.find(".hypothesis-highlight").each((function(){return r(this).contents().insertBefore(this),r(this).remove()})),this.element.data("annotator",null),n=this.plugins)n[t],this.plugins[t].destroy();return e.__super__.destroy.apply(this,arguments)},e.prototype.anchor=function(t){var e,n,o,i,s,u,l,f,h,d,p,g,m,y,b,w,E;for(b=this,y=this.element[0],o=[],n=[],i=[],null==t.target&&(t.target=[]),d=function(e){var n,r;return(null!=(r=e.selector)?r:[]).some((function(t){return"TextQuoteSelector"===t.type}))?(n={cache:b.anchoringCache,ignoreSelector:'[class^="annotator-"],[class^="hypothesis-"]'},b.anchoring.anchor(y,e.selector,n).then((function(n){return{annotation:t,target:e,range:n}})).catch((function(){return{annotation:t,target:e}}))):Promise.resolve({annotation:t,target:e})},s=function(t){return null==t.range?t:a((function(){var e,n;return n=v.sniff(t.range).normalize(y),e=c.highlightRange(n),r(e).data("annotation",t.annotation),t.highlights=e,t}))},w=function(e){var n,r,o,i,s,a,u;for(r=!1,o=!1,i=0,s=e.length;i<s;i++)if(null!=(n=e[i]).target.selector&&(r=!0,null!=n.range)){o=!0;break}return t.$orphan=r&&!o,b.anchors=b.anchors.concat(e),null!=(a=b.plugins.BucketBar)&&a.update(),null!=(u=b.plugins.CrossFrame)&&u.sync([t]),e},u=0,f=(p=b.anchors.splice(0,b.anchors.length)).length;u<f;u++)(e=p[u]).annotation===t?null!=e.range&&(g=e.target,_.call(t.target,g)>=0)?(o.push(e),n.push(e.target)):null!=e.highlights&&(i=i.concat(e.highlights),delete e.highlights,delete e.range):b.anchors.push(e);for(requestAnimationFrame((function(){return c.removeHighlights(i)})),l=0,h=(m=t.target).length;l<h;l++)E=m[l],_.call(n,E)<0&&(e=d(E).then(s),o.push(e));return Promise.all(o).then(w)},e.prototype.detach=function(t){var e,n,r,o,i,s,a,u,l;for(n=[],u=[],r=0,o=(i=this.anchors).length;r<o;r++)(e=i[r]).annotation===t?u.push(null!=(s=e.highlights)?s:[]):n.push(e);return this.anchors=n,u=(a=Array.prototype).concat.apply(a,u),requestAnimationFrame((l=this,function(){var t;return c.removeHighlights(u),null!=(t=l.plugins.BucketBar)?t.update():void 0}))},e.prototype.createAnnotation=function(t){var e,n,r,o,i,s,a,u,l,c,f;return null==t&&(t={}),u=this,s=this.element[0],r=null!=(o=this.selectedRanges)?o:[],this.selectedRanges=null,e=function(t){var e;return e={cache:u.anchoringCache,ignoreSelector:'[class^="annotator-"],[class^="hypothesis-"]'},u.anchoring.describe(s,t,e)},l=function(e){return t.document=e.metadata,t.uri=e.uri},c=function(e){var n,r,o,i;return n=e[0],o=e[1],i=n.uri,t.target=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push({source:i,selector:r});return n}()},n=this.getDocumentInfo(),a=Promise.all(r.map(e)),n.then(l),(f=Promise.all([n,a]).then(c)).then((function(){return u.publish("beforeAnnotationCreated",[t])})),f.then((function(){return u.anchor(t)})),t.$highlight||null!=(i=this.crossframe)&&i.call("showSidebar"),t},e.prototype.createHighlight=function(){return this.createAnnotation({$highlight:!0})},e.prototype.createComment=function(){var t,e,n;return t={},n=this,e=function(e){return t.document=e.metadata,t.uri=e.uri,t.target=[{source:e.uri}]},this.getDocumentInfo().then(e).then((function(){return n.publish("beforeAnnotationCreated",[t])})),t},e.prototype.deleteAnnotation=function(t){var e,n,o,i;if(null!=t.highlights)for(n=0,o=(i=t.highlights).length;n<o;n++)null!=(e=i[n]).parentNode&&r(e).replaceWith(e.childNodes);return this.publish("annotationDeleted",[t]),t},e.prototype.showAnnotations=function(t){var e,n,r,o;return o=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)&&n.call("showAnnotations",o),null!=(r=this.crossframe)?r.call("showSidebar"):void 0},e.prototype.toggleAnnotationSelection=function(t){var e,n,r;return r=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)?n.call("toggleAnnotationSelection",r):void 0},e.prototype.updateAnnotations=function(t){var e,n,r;return r=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)?n.call("updateAnnotations",r):void 0},e.prototype.focusAnnotations=function(t){var e,n,r;return r=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.$tag);return o}(),null!=(n=this.crossframe)?n.call("focusAnnotations",r):void 0},e.prototype._onSelection=function(t){var e,n,r,o,i,s,a,l;if(a=document.getSelection(),r=d.isSelectionBackwards(a),n=d.selectionFocusRect(a))return this.selectedRanges=[t],null!=(i=this.toolbar)&&(i.newAnnotationType="annotation"),o=(s=this.adderCtrl.target(n,r)).left,l=s.top,e=s.arrowDirection,this.adderCtrl.annotationsForSelection=u(),this.adderCtrl.showAt(o,l,e);this._onClearSelection()},e.prototype._onClearSelection=function(){var t;return this.adderCtrl.hide(),this.selectedRanges=[],null!=(t=this.toolbar)?t.newAnnotationType="note":void 0},e.prototype.selectAnnotations=function(t,e){return e?this.toggleAnnotationSelection(t):this.showAnnotations(t)},e.prototype._isEventInAnnotator=function(t){return null!==l(t.target,".annotator-frame")},e.prototype.onElementClick=function(t){var e,n;if(!this._isEventInAnnotator(t)&&!(null!=(e=this.selectedTargets)?e.length:void 0))return null!=(n=this.crossframe)?n.call("hideSidebar"):void 0},e.prototype.onElementTouchStart=function(t){var e,n;if(!this._isEventInAnnotator(t)&&!(null!=(e=this.selectedTargets)?e.length:void 0))return null!=(n=this.crossframe)?n.call("hideSidebar"):void 0},e.prototype.onHighlightMouseover=function(t){var e,n,o;if(this.visibleHighlights)return e=r(t.currentTarget).data("annotation"),(n=null!=t.annotations?t.annotations:t.annotations=[]).push(e),t.target===t.currentTarget?setTimeout((o=this,function(){return o.focusAnnotations(n)})):void 0},e.prototype.onHighlightMouseout=function(t){if(this.visibleHighlights)return this.focusAnnotations([])},e.prototype.onHighlightClick=function(t){var e,n,o,i;if(this.visibleHighlights)return e=r(t.currentTarget).data("annotation"),(n=null!=t.annotations?t.annotations:t.annotations=[]).push(e),t.target===t.currentTarget?(o=t.metaKey||t.ctrlKey,setTimeout((i=this,function(){return i.selectAnnotations(n,o)}))):void 0},e.prototype.setVisibleHighlights=function(t){return this.toggleHighlightClass(t)},e.prototype.toggleHighlightClass=function(t){var e;return t?this.element.addClass("hypothesis-highlights-always-on"):this.element.removeClass("hypothesis-highlights-always-on"),this.visibleHighlights=t,null!=(e=this.toolbar)?e.highlightsVisible=t:void 0},e}()},{"../shared/dom-element":97,"./adder":43,"./anchoring/html":44,"./anchoring/range":46,"./delegator":59,"./highlighter":63,"./range-util":75,"./selections":76,"./util/url":83,"custom-event":3,jquery:"jquery","scroll-into-view":40}],63:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.highlightRange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hypothesis-highlight",n=/^\s*$/,o=t.textNodes(),s=o.length>0&&null!==(0,r.closest)(o[0].parentNode,".annotator-placeholder"),a=[],u=null,l=null;o.forEach((function(t){u&&u.nextSibling===t?l.push(t):(l=[t],a.push(l)),u=t})),a=a.filter((function(t){return t.some((function(t){return!n.test(t.nodeValue)}))}));var c=[];return a.forEach((function(t){var n=document.createElement("hypothesis-highlight");if(n.className=e,t[0].parentNode.replaceChild(n,t[0]),t.forEach((function(t){return n.appendChild(t)})),!s){var r=i(n);r&&(n.className+=" is-transparent",n.svgHighlight=r)}c.push(n)})),c},n.removeHighlights=function(t){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.parentNode&&s(r,Array.from(r.childNodes)),r.svgHighlight&&r.svgHighlight.remove()}}catch(t){n.e(t)}finally{n.f()}},n.getBoundingClientRect=function(t){return t.map((function(t){return t.getBoundingClientRect()})).reduce((function(t,e){return{top:Math.min(t.top,e.top),left:Math.min(t.left,e.left),bottom:Math.max(t.bottom,e.bottom),right:Math.max(t.right,e.right)}}))};var r=t("../shared/dom-element");function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){var e=function(t){var e=(0,r.closest)(t,".page");return e&&e.querySelector(".canvasWrapper > canvas")||null}(t);if(!e)return null;var n=e.parentElement.querySelector(".hypothesis-highlight-layer"),o=function(t,e){return"function"==typeof CSS&&"function"==typeof CSS.supports&&CSS.supports(t,e)}("mix-blend-mode","multiply");if(!n){(n=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("class","hypothesis-highlight-layer"),e.parentElement.appendChild(n),e.parentElement.style.position="relative";var i=n.style;i.position="absolute",i.left=0,i.top=0,i.width="100%",i.height="100%",o?i.mixBlendMode="multiply":i.opacity=.3}var s=e.getBoundingClientRect(),a=t.getBoundingClientRect(),u=document.createElementNS("http://www.w3.org/2000/svg","rect");return u.setAttribute("x",a.left-s.left),u.setAttribute("y",a.top-s.top),u.setAttribute("width",a.width),u.setAttribute("height",a.height),o?u.setAttribute("class","hypothesis-svg-highlight"):u.setAttribute("class","hypothesis-svg-highlight is-opaque"),n.appendChild(u),u}function s(t,e){var n=t.parentNode;e.forEach((function(e){return n.insertBefore(e,t)})),t.remove()}},{"../shared/dom-element":97}],64:[function(t,e,n){var r,o,i={}.hasOwnProperty;r=t("jquery"),o=t("./guest"),e.exports=function(t){function e(t,n){var o,i,s,a,u,l,c;(null!=(a=n.services)?a[0]:void 0)&&((u=n.services[0]).onLoginRequest&&(u.onLoginRequestProvided=!0),u.onLogoutRequest&&(u.onLogoutRequestProvided=!0),u.onSignupRequest&&(u.onSignupRequestProvided=!0),u.onProfileRequest&&(u.onProfileRequestProvided=!0),u.onHelpRequest&&(u.onHelpRequestProvided=!0)),i="config="+encodeURIComponent(JSON.stringify(Object.assign({},n,{sidebarAppUrl:void 0,pluginClasses:void 0}))),l=n.sidebarAppUrl+"#"+i,o=r("<iframe></iframe>").attr("name","hyp_sidebar_frame").attr("allowfullscreen","").attr("seamless","").attr("src",l).attr("title","Hypothesis annotation viewer").addClass("h-sidebar-iframe"),s=null,n.externalContainerSelector&&(s=document.querySelector(n.externalContainerSelector)),s?this.externalFrame=r(s):(this.frame=r("<div></div>").css("display","none").addClass("annotator-frame annotator-outer"),"clean"===n.theme&&this.frame.addClass("annotator-frame--drop-shadow-enabled"),this.frame.appendTo(t)),e.__super__.constructor.apply(this,arguments),o.appendTo(this.frame||this.externalFrame),this.on("panelReady",(c=this,function(){var t;return null!=(t=c.frame)?t.css("display",""):void 0})),this.on("beforeAnnotationCreated",(function(t){if(!t.$highlight)return o[0].contentWindow.focus()}))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,o),e.prototype.destroy=function(){var t;return null!=(t=this.frame)&&t.remove(),e.__super__.destroy.apply(this,arguments)},e}()},{"./guest":62,jquery:"jquery"}],65:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={annotate:t("../images/icons/annotate.svg"),cancel:t("../images/icons/cancel.svg"),"caret-left":t("../images/icons/caret-left.svg"),"caret-right":t("../images/icons/caret-right.svg"),hide:t("../images/icons/hide.svg"),highlight:t("../images/icons/highlight.svg"),note:t("../images/icons/note.svg"),show:t("../images/icons/show.svg")};n.default=r},{"../images/icons/annotate.svg":84,"../images/icons/cancel.svg":85,"../images/icons/caret-left.svg":86,"../images/icons/caret-right.svg":87,"../images/icons/hide.svg":88,"../images/icons/highlight.svg":89,"../images/icons/note.svg":90,"../images/icons/show.svg":91}],66:[function(t,e,n){"use strict";var r=p(t("jquery"));t("focus-visible");var o=t("../shared/components/svg-icon"),i=p(t("./icons")),s=p(t("./config/index")),a=p(t("./guest")),u=p(t("./pdf-sidebar")),l=p(t("./plugin/bucket-bar")),c=p(t("./plugin/cross-frame")),f=p(t("./plugin/document")),h=p(t("./plugin/pdf")),d=p(t("./sidebar"));function p(t){return t&&t.__esModule?t:{default:t}}(0,o.registerIcons)(i.default);var g={BucketBar:l.default,PDF:h.default,Document:f.default,CrossFrame:c.default},v=document.querySelector('link[type="application/annotator+html"][rel="sidebar"]'),m=(0,s.default)(window);r.default.noConflict(!0)((function(){var t=window.PDFViewerApplication?u.default:d.default;m.hasOwnProperty("constructor")&&(t=m.constructor,delete m.constructor),m.subFrameIdentifier&&(void 0!==window.PDFViewerApplication&&(m.PDF={}),t=a.default,window.__hypothesis_frame=!0),m.pluginClasses=g;var e=new t(document.body,m);v.addEventListener("destroy",(function(){v.parentElement.removeChild(v),e.destroy()}))}))},{"../shared/components/svg-icon":95,"./config/index":56,"./guest":62,"./icons":65,"./pdf-sidebar":67,"./plugin/bucket-bar":70,"./plugin/cross-frame":71,"./plugin/document":72,"./plugin/pdf":74,"./sidebar":78,"focus-visible":31,jquery:"jquery"}],67:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./sidebar"))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c={TextSelection:{},PDF:{},BucketBar:{container:".annotator-frame",scrollables:["#viewerContainer"]},Toolbar:{container:".annotator-frame"}},f=function(t){s(n,o.default);var e=a(n);function n(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,Object.assign({},c,r))}return n}();n.default=f},{"./sidebar":78}],68:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};n.default=r},{}],69:[function(t,e,n){var r,o={}.hasOwnProperty;r=t("./delegator"),e.exports=function(t){function e(t,n){e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,r),e.prototype.pluginInit=function(){},e}()},{"./delegator":59}],70:[function(t,e,n){var r,o,i,s,a,u,l,c,f={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("jquery"),a=t("../plugin"),l=t("scroll-into-view"),u=t("../highlighter"),i=115+(o=6+16),c=function(t,e){var n,r;return n="up"===e?1:-1,r=t.reduce((function(t,e){var s,a,l;return(null!=(a=e.highlights)?a.length:void 0)?(l=t.start,r=t.next,s=u.getBoundingClientRect(e.highlights),1===n&&s.top>=i||-1===n&&s.top<=window.innerHeight-o?t:null==r||l*n<s.top*n?{start:s.top,next:e}:t):t}),{}).next,l(r.highlights[0])},e.exports=s=function(t){function e(t,n){var o;this.update=function(t,e){return function(){return t.apply(e,arguments)}}(this.update,this),e.__super__.constructor.call(this,r(this.html),n),null!=this.options.container?r(this.options.container).append(this.element):r(t).append(this.element),this.highlighter=null!=(o=n.highlighter)?o:u}return function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,a),e.prototype.html='<div class="annotator-bucket-bar">\n</div>',e.prototype.options={gapSize:60,scrollables:["body"]},e.prototype.buckets=[],e.prototype.index=[],e.prototype.tabs=null,e.prototype.pluginInit=function(){var t,e,n,o,i,s;for(r(window).on("resize scroll",this.update),i=[],t=0,e=(o=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)s=o[t],i.push(r(s).on("resize scroll",this.update));return i},e.prototype.destroy=function(){var t,e,n,o,i,s;for(r(window).off("resize scroll",this.update),i=[],t=0,e=(o=null!=(n=this.options.scrollables)?n:[]).length;t<e;t++)s=o[t],i.push(r(s).off("resize scroll",this.update));return i},e.prototype._collate=function(t,e){var n,r,o;for(n=r=0,o=t.length-1;0<=o?r<=o:r>=o;n=0<=o?++r:--r){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},e.prototype.update=function(){var t;if(null==this._updatePending)return this._updatePending=requestAnimationFrame((t=this,function(){return delete t._updatePending,t._update()}))},e.prototype._update=function(){var t,e,n,s,a,u,l,f,d,p,g;for(t=[],n=[],f=this.annotator.anchors.reduce((g=this,function(e,r,s){var a,u,l,c;return(null!=(l=r.highlights)?l.length:void 0)?(c=(u=g.highlighter.getBoundingClientRect(r.highlights)).top,a=u.bottom-u.top,c<i?h.call(t,r)<0&&t.push(r):c>window.innerHeight-o?h.call(n,r)<0&&n.push(r):(e.push([c,1,r]),e.push([c+a,-1,r])),e):e}),[]),d=f.sort(this._collate).reduce(function(t){return function(e,n,r,o){var i,s,a,u,l,c,f,d,p,g,v,m,y,_,b,w;if(a=e.buckets,c=e.index,u=e.carry,w=n[0],l=n[1],i=n[2],l>0?(f=u.anchors.indexOf(i))<0?(u.anchors.unshift(i),u.counts.unshift(1)):u.counts[f]++:(f=u.anchors.indexOf(i),0==--u.counts[f]&&(u.anchors.splice(f,1),u.counts.splice(f,1))),0===c.length||r===o.length-1||0===u.anchors.length||w-c[c.length-1]>t.options.gapSize)a.push(u.anchors.slice()),c.push(w);else{for((null!=(y=a[a.length-2])?y.length:void 0)?(g=a[a.length-2],b=a.pop(),c.pop()):(g=a[a.length-1],b=[]),d=0,v=(_=u.anchors).length;d<v;d++)s=_[d],h.call(g,s)<0&&g.push(s);for(p=0,m=b.length;p<m;p++)s=b[p],h.call(g,s)<0&&g.push(s)}return{buckets:a,index:c,carry:u}}}(this),{buckets:[],index:[],carry:{anchors:[],counts:[],latest:0}}),this.buckets=d.buckets,this.index=d.index,this.buckets.unshift([],t,[]),this.index.unshift(0,i-1,i),this.buckets.push([],n,[]),this.index.push(window.innerHeight-o,window.innerHeight-o+1,window.innerHeight),l=0,a=0,u=(p=this.buckets).length;a<u;a++)e=p[a],l=Math.max(l,e.length);return s=this.element,this.tabs||(this.tabs=r([])),this.tabs.slice(this.buckets.length).remove(),this.tabs=this.tabs.slice(0,this.buckets.length),r.each(this.buckets.slice(this.tabs.length),function(t){return function(){var e;return e=r("<div/>").appendTo(s),t.tabs.push(e[0]),e.addClass("annotator-bucket-indicator").on("mousemove",(function(e){var n,o,i,s,a,u,l;for(o=t.tabs.index(e.currentTarget),u=[],i=0,s=(a=t.annotator.anchors).length;i<s;i++)n=a[i],l=h.call(t.buckets[o],n)>=0,u.push(r(n.highlights).toggleClass("hypothesis-highlight-focused",l));return u})).on("mouseout",(function(e){var n,o,i,s,a,u;for(o=t.tabs.index(e.currentTarget),u=[],i=0,s=(a=t.buckets[o]).length;i<s;i++)n=a[i],u.push(r(n.highlights).removeClass("hypothesis-highlight-focused"));return u})).on("click",(function(e){var n,r,o;return o=t.tabs.index(e.currentTarget),e.stopPropagation(),t.isUpper(o)?c(t.buckets[o],"up"):t.isLower(o)?c(t.buckets[o],"down"):(r=function(){var t,e,r,i;for(i=[],t=0,e=(r=this.buckets[o]).length;t<e;t++)n=r[t],i.push(n.annotation);return i}.call(t),t.annotator.selectAnnotations(r,e.ctrlKey||e.metaKey))}))}}(this)),this._buildTabs(this.tabs,this.buckets)},e.prototype._buildTabs=function(){return this.tabs.each((t=this,function(e,n){var i,s,a,u;if(n=r(n),u=1!==(s=null!=(i=t.buckets[e])?i.length:void 0)?"Show "+s+" annotations":s>0?"Show one annotation":void 0,n.attr("title",u),n.toggleClass("upper",t.isUpper(e)),n.toggleClass("lower",t.isLower(e)),a=t.isUpper(e)||t.isLower(e)?o:16,n.css({top:(t.index[e]+t.index[e+1])/2,marginTop:-a/2,display:s?"":"none"}),i)return n.html("<div class='label'>"+s+"</div>")}));var t},e.prototype.isUpper=function(t){return 1===t},e.prototype.isLower=function(t){return t===this.index.length-2},e}(),s.BUCKET_SIZE=16,s.BUCKET_NAV_SIZE=o,s.BUCKET_TOP_THRESHOLD=i},{"../highlighter":63,"../plugin":69,jquery:"jquery","scroll-into-view":40}],71:[function(t,e,n){var r,o,i,s,a,u,l,c=[].slice,f={}.hasOwnProperty;u=t("../plugin"),r=t("../annotation-sync").default,o=t("../../shared/bridge").default,i=t("../../shared/discovery").default,a=t("../util/frame-util"),s=t("../frame-observer").default,l=l=function(){var t,e,n,r,o,i;for(o=arguments[0],i={},t=0,r=(n=2<=arguments.length?c.call(arguments,1):[]).length;t<r;t++)e=n[t],o.hasOwnProperty(e)&&(i[e]=o[e]);return i},e.exports=function(t){function e(t,n){var f,h,d,p,g,v,m,y,_;e.__super__.constructor.apply(this,arguments),g=n.config,_=l(n,"server"),v=new i(window,_),p=new o,_=l(n,"on","emit"),d=new r(p,_),y=new s(t),m=new Map,this.pluginInit=function(){var t;return t=function(t,e,n){return p.createChannel(t,e,n)},v.startDiscovery(t),y.observe(h,f)},this.destroy=function(){return u.prototype.destroy.apply(this,arguments),p.destroy(),v.stopDiscovery(),y.disconnect()},this.sync=function(t,e){return d.sync(t,e)},this.on=function(t,e){return p.on(t,e)},this.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],p.call.apply(p,[e].concat(c.call(t)))},this.onConnect=function(t){return p.onConnect(t)},h=function(t){var e;if(!a.hasHypothesis(t))return e=g.clientUrl,a.isLoaded(t,(function(){var n,r;return r=v.generateToken(),m.set(t,r),n=Object.assign({},g,{subFrameIdentifier:r}),a.injectHypothesis(t,e,n)}))},f=function(t){return p.call("destroyFrame",m.get(t)),m.delete(t)}}return function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,u),e}()},{"../../shared/bridge":93,"../../shared/discovery":96,"../annotation-sync":52,"../frame-observer":61,"../plugin":69,"../util/frame-util":80}],72:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=s(t("document-base-uri")),o=s(t("../plugin")),i=t("../util/url");function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){f(n,o.default);var e=h(n);function n(t,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(o=e.call(this,t,r)).events={beforeAnnotationCreated:"beforeAnnotationCreated"},o}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(n,[{key:"pluginInit",value:function(){this.baseURI=this.options.baseURI||r.default,this.document=this.options.document||document,this.normalizeURI=this.options.normalizeURI||i.normalizeURI,this.getDocumentMetadata()}},{key:"uri",value:function(){var t,e=decodeURIComponent(this._getDocumentHref()),n=u(this.metadata.link);try{for(n.s();!(t=n.n()).done;){var r=t.value;"canonical"===r.rel&&(e=r.href)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"uris",value:function(){var t,e={},n=u(this.metadata.link);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.href&&(e[r.href]=!0)}}catch(t){n.e(t)}finally{n.f()}return Object.keys(e)}},{key:"beforeAnnotationCreated",value:function(t){t.document=this.metadata}},{key:"getDocumentMetadata",value:function(){return this.metadata={},this._getHighwire(),this._getDublinCore(),this._getFacebook(),this._getEprints(),this._getPrism(),this._getTwitter(),this._getFavicon(),this._getTitle(),this._getLinks(),this.metadata}},{key:"_getHighwire",value:function(){this.metadata.highwire=this._getMetaTags("citation","name","_")}},{key:"_getFacebook",value:function(){this.metadata.facebook=this._getMetaTags("og","property",":")}},{key:"_getTwitter",value:function(){this.metadata.twitter=this._getMetaTags("twitter","name",":")}},{key:"_getDublinCore",value:function(){this.metadata.dc=this._getMetaTags("dc","name",".")}},{key:"_getPrism",value:function(){this.metadata.prism=this._getMetaTags("prism","name",".")}},{key:"_getEprints",value:function(){this.metadata.eprints=this._getMetaTags("eprints","name",".")}},{key:"_getMetaTags",value:function(t,e,n){for(var r={},o=0,i=Array.from(this.document.querySelectorAll("meta"));o<i.length;o++){var s=i[o],a=s.getAttribute(e),u=s.content;if(a){var l=a.match(RegExp("^".concat(t).concat(n,"(.+)$"),"i"));if(l){var c=l[1];r[c]?r[c].push(u):r[c]=[u]}}}return r}},{key:"_getTitle",value:function(){this.metadata.highwire.title?this.metadata.title=this.metadata.highwire.title[0]:this.metadata.eprints.title?this.metadata.title=this.metadata.eprints.title[0]:this.metadata.prism.title?this.metadata.title=this.metadata.prism.title[0]:this.metadata.facebook.title?this.metadata.title=this.metadata.facebook.title[0]:this.metadata.twitter.title?this.metadata.title=this.metadata.twitter.title[0]:this.metadata.dc.title?this.metadata.title=this.metadata.dc.title[0]:this.metadata.title=this.document.title}},{key:"_getLinks",value:function(){this.metadata.link=[{href:this._getDocumentHref()}];for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["alternate","canonical","bookmark","shortlink"].includes(n.rel)){if("alternate"===n.rel){if(n.type&&n.type.match(/^application\/(rss|atom)\+xml/))continue;if(n.hreflang)continue}try{var r=this._absoluteUrl(n.href);this.metadata.link.push({href:r,rel:n.rel,type:n.type})}catch(t){}}}for(var o=0,i=Object.keys(this.metadata.highwire);o<i.length;o++){var s=i[o],a=this.metadata.highwire[s];if("pdf_url"===s){var l,c=u(a);try{for(c.s();!(l=c.n()).done;){var f=l.value;try{this.metadata.link.push({href:this._absoluteUrl(f),type:"application/pdf"})}catch(t){}}}catch(t){c.e(t)}finally{c.f()}}if("doi"===s){var h,d=u(a);try{for(d.s();!(h=d.n()).done;){var p=h.value;"doi:"!==p.slice(0,4)&&(p="doi:".concat(p)),this.metadata.link.push({href:p})}}catch(t){d.e(t)}finally{d.f()}}}for(var g=0,v=Object.keys(this.metadata.dc);g<v.length;g++){var m=v[g],y=this.metadata.dc[m];if("identifier"===m){var _,b=u(y);try{for(b.s();!(_=b.n()).done;){var w=_.value;"doi:"===w.slice(0,4)&&this.metadata.link.push({href:w})}}catch(t){b.e(t)}finally{b.f()}}}var E=this.metadata.dc["relation.ispartof"],x=this.metadata.dc.identifier;if(E&&x){var S=E[E.length-1],T=x[x.length-1],O="urn:x-dc:"+encodeURIComponent(S)+"/"+encodeURIComponent(T);this.metadata.link.push({href:O}),this.metadata.documentFingerprint=O}}},{key:"_getFavicon",value:function(){for(var t=0,e=Array.from(this.document.querySelectorAll("link"));t<e.length;t++){var n=e[t];if(["shortcut icon","icon"].includes(n.rel))try{this.metadata.favicon=this._absoluteUrl(n.href)}catch(t){}}}},{key:"_absoluteUrl",value:function(t){return this.normalizeURI(t,this.baseURI)}},{key:"_getDocumentHref",value:function(){var t=this.document.location.href,e=["http:","https:","file:"],n=new URL(t).protocol;return e.includes(n)?t:this.baseURI&&e.includes(new URL(this.baseURI).protocol)?this.baseURI:t}}]),n}();n.default=g},{"../plugin":69,"../util/url":83,"document-base-uri":5}],73:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../util/url");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._loaded=new Promise((function(t){var n=function n(){window.removeEventListener("documentload",n),window.removeEventListener("documentloaded",n),t(e)};e.downloadComplete?t(e):(window.addEventListener("documentload",n),window.addEventListener("documentloaded",n))}))}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"getUri",value:function(){return this._loaded.then((function(t){var e=a(t);return e||(e=s(t.pdfDocument.fingerprint)),e}))}},{key:"getMetadata",value:function(){return this._loaded.then((function(t){var e=document.title;t.metadata&&t.metadata.has("dc:title")&&"Untitled"!==t.metadata.get("dc:title")?e=t.metadata.get("dc:title"):t.documentInfo&&t.documentInfo.Title&&(e=t.documentInfo.Title);var n=[{href:s(t.pdfDocument.fingerprint)}],r=a(t);return r&&n.push({href:r}),{title:e,link:n,documentFingerprint:t.pdfDocument.fingerprint}}))}}]),t}();function s(t){return"urn:x-pdf:"+String(t)}function a(t){var e=(0,r.normalizeURI)(t.url);return 0!==e.indexOf("file://")?e:null}n.default=i},{"../util/url":83}],74:[function(t,e,n){var r,o,i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("../plugin"),o=t("../pdfjs-rendering-states").default,e.exports=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,r),n.prototype.documentLoaded=null,n.prototype.observer=null,n.prototype.pdfViewer=null,n.prototype.pluginInit=function(){var e,n;return this.annotator.anchoring=t("../anchoring/pdf"),e=t("./pdf-metadata").default,this.pdfViewer=PDFViewerApplication.pdfViewer,this.pdfViewer.viewer.classList.add("has-transparent-text-layer"),this.pdfMetadata=new e(PDFViewerApplication),this.observer=new MutationObserver((n=this,function(t){return n._update()})),this.observer.observe(this.pdfViewer.viewer,{attributes:!0,attributeFilter:["data-loaded"],childList:!0,subtree:!0})},n.prototype.destroy=function(){return this.pdfViewer.viewer.classList.remove("has-transparent-text-layer"),this.observer.disconnect()},n.prototype.uri=function(){return this.pdfMetadata.getUri()},n.prototype.getMetadata=function(){return this.pdfMetadata.getMetadata()},n.prototype._update=function(){var t,e,n,r,i,a,u,l,c,f,h,d,p,g,v,m,y,_,b,w,E,x,S,T;for(n=this.annotator,S=[],g=i=0,y=(v=this.pdfViewer).pagesCount;0<=y?i<y:i>y;g=0<=y?++i:--i)if(null!=(_=(p=v.getPageView(g)).textLayer)?_.renderingDone:void 0)switch(m=(null!=(b=p.div)?b:p.el).getElementsByClassName("annotator-placeholder")[0],p.renderingState){case o.INITIAL:p.textLayer=null;break;case o.FINISHED:null!=m&&m.parentNode.removeChild(m)}for(u=0,f=(w=n.anchors).length;u<f;u++)if(null!=(t=w[u]).highlights&&(E=t.annotation,!(s.call(S,E)>=0)))for(a=l=0,h=(x=t.highlights).length;l<h;a=++l)if(r=x[a],!document.body.contains(r)){t.highlights.splice(a,1),delete t.range,S.push(t.annotation);break}for(T=[],c=0,d=S.length;c<d;c++)e=S[c],T.push(n.anchor(e));return T},n}()},{"../anchoring/pdf":45,"../pdfjs-rendering-states":68,"../plugin":69,"./pdf-metadata":73}],75:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return t.focusNode===t.anchorNode?t.focusOffset<t.anchorOffset:t.getRangeAt(0).startContainer===t.focusNode}function s(t,e){if(e===t.startContainer||e===t.endContainer)return!0;var n=e.ownerDocument.createRange();n.selectNode(e);var r=t.compareBoundaryPoints(Range.START_TO_START,n)<=0,o=t.compareBoundaryPoints(Range.END_TO_END,n)>=0;return n.detach(),r&&o}function a(t,e){for(var n,r=t.commonAncestorContainer,o=r.ownerDocument.createNodeIterator(r,NodeFilter.SHOW_ALL,null,!1);n=o.nextNode();)s(t,n)&&e(n)}function u(t){var e=/^\s*$/,n=[];a(t,(function(t){t.nodeType!==Node.TEXT_NODE||t.textContent.match(e)||n.push(t)}));var r=[];return n.forEach((function(e){var n=e.ownerDocument.createRange();if(n.selectNodeContents(e),e===t.startContainer&&n.setStart(e,t.startOffset),e===t.endContainer&&n.setEnd(e,t.endOffset),!n.collapsed){var o=Array.from(n.getClientRects());n.detach(),r=r.concat(o)}})),r}Object.defineProperty(n,"__esModule",{value:!0}),n.isSelectionBackwards=i,n.isNodeInRange=s,n.getTextBoundingBoxes=u,n.selectionFocusRect=function(t){if(t.isCollapsed)return null;var e=u(t.getRangeAt(0));return 0===e.length?null:i(t)?e[0]:e[e.length-1]},n.itemsForRange=function(t,e){var n=new Set,o=new Set;return a(t,(function(t){for(var r=t;r&&!n.has(r);){n.add(r);var i=e(r);i&&o.add(i),r=r.parentNode}})),r(o)}},{}],76:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e,n=o.listen(t,["mousedown","mouseup","selectionchange"]).filter((function(t){return"mousedown"===t.type||"mouseup"===t.type?(e="mousedown"===t.type,!1):!e}));return o.merge([o.buffer(10,o.listen(t,["mouseup"])),o.buffer(100,n),o.delay(0,o.Observable.of({}))]).map((function(){return function(t){var e=t.getSelection();return!e.rangeCount||e.getRangeAt(0).collapsed?null:e.getRangeAt(0)}(t)}))};var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=o?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}(t("./util/observable"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}},{"./util/observable":81}],77:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=t.querySelectorAll("[data-hypothesis-trigger]");function r(t){e(),t.stopPropagation()}Array.from(n).forEach((function(t){t.addEventListener("click",r)}))}},{}],78:[function(t,e,n){var r,o,i,s,a,u,l,c,f=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;r=t("jquery"),o=t("hammerjs"),i=t("./host"),a=t("./annotation-counts").default,c=t("./sidebar-trigger").default,u=t("../shared/bridge-events").default,l=t("./features").default,s=t("./toolbar").ToolbarController,e.exports=function(t){function e(t,n){var r,o,i,a;this.onSwipe=f(this.onSwipe,this),this.onPan=f(this.onPan,this),this._notifyOfLayoutChange=f(this._notifyOfLayoutChange,this),("clean"===n.theme||n.externalContainerSelector)&&delete n.pluginClasses.BucketBar,e.__super__.constructor.apply(this,arguments),(n.openSidebar||n.annotations||n.query||n.group)&&this.on("panelReady",(a=this,function(){return a.show()})),null!=this.plugins.BucketBar&&this.plugins.BucketBar.element.on("click",function(t){return function(e){return t.show()}}(this)),i=document.createElement("div"),this.toolbar=new s(i,{createAnnotation:function(t){return function(){return t.createAnnotation()}}(this),setSidebarOpen:function(t){return function(e){return e?t.show():t.hide()}}(this),setHighlightsVisible:function(t){return function(e){return t.setAllVisibleHighlights(e)}}(this)}),this.toolbar.useMinimalControls="clean"===n.theme,this.frame?(this.frame.prepend(i),this.toolbarWidth=this.toolbar.getWidth()):this.toolbarWidth=0,this._setupGestures(),this.hide(),(o=null!=(r=n.services)?r[0]:void 0)&&(this.onLoginRequest=o.onLoginRequest,this.onLogoutRequest=o.onLogoutRequest,this.onSignupRequest=o.onSignupRequest,this.onProfileRequest=o.onProfileRequest,this.onHelpRequest=o.onHelpRequest),this.onLayoutChange=n.onLayoutChange,this._notifyOfLayoutChange(!1),this._setupSidebarEvents()}return function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,i),e.prototype.options={Document:{},TextSelection:{},BucketBar:{container:".annotator-frame"}},e.prototype.renderFrame=null,e.prototype.gestureState=null,e.prototype._setupSidebarEvents=function(){var t;return a(document.body,this.crossframe),c(document.body,(t=this,function(){return t.show()})),l.init(this.crossframe),this.crossframe.on("showSidebar",function(t){return function(){return t.show()}}(this)),this.crossframe.on("hideSidebar",function(t){return function(){return t.hide()}}(this)),this.crossframe.on(u.LOGIN_REQUESTED,function(t){return function(){if(t.onLoginRequest)return t.onLoginRequest()}}(this)),this.crossframe.on(u.LOGOUT_REQUESTED,function(t){return function(){if(t.onLogoutRequest)return t.onLogoutRequest()}}(this)),this.crossframe.on(u.SIGNUP_REQUESTED,function(t){return function(){if(t.onSignupRequest)return t.onSignupRequest()}}(this)),this.crossframe.on(u.PROFILE_REQUESTED,function(t){return function(){if(t.onProfileRequest)return t.onProfileRequest()}}(this)),this.crossframe.on(u.HELP_REQUESTED,function(t){return function(){if(t.onHelpRequest)return t.onHelpRequest()}}(this)),this},e.prototype._setupGestures=function(){var t,e,n;if((t=r(this.toolbar.sidebarToggleButton))[0])return t.on("touchmove",(function(t){return t.preventDefault()})),n=(e=new o.Manager(t[0]).on("panstart panend panleft panright",this.onPan).on("swipeleft swiperight",this.onSwipe)).add(new o.Pan({direction:o.DIRECTION_HORIZONTAL})),e.add(new o.Swipe({direction:o.DIRECTION_HORIZONTAL})).recognizeWith(n),this._initializeGestureState(),this},e.prototype._initializeGestureState=function(){return this.gestureState={initial:null,final:null}},e.prototype._updateLayout=function(){var t;if(!this.renderFrame)return this.renderFrame=requestAnimationFrame((t=this,function(){var e,n;if(t.renderFrame=null,t.gestureState.final!==t.gestureState.initial)return n=-(e=t.gestureState.final),t.frame.css("margin-left",e+"px"),n>=280&&t.frame.css("width",n+"px"),t._notifyOfLayoutChange()}))},e.prototype._notifyOfLayoutChange=function(t){var e,n,r,o,i,s,a,u;if(a=this.toolbarWidth||0,this.onLayoutChange)return s=(r=this.frame||this.externalFrame)[0].getBoundingClientRect(),e=window.getComputedStyle(r[0]),u=parseInt(e.width),i=parseInt(e.marginLeft),o=a,null!=t?t&&(o+=u):o+=i<280?-i:u,n=o>a,this.onLayoutChange({expanded:n,width:n?o:a,height:s.height})},e.prototype.onPan=function(t){var e,n;if(this.frame)switch(t.type){case"panstart":return this._initializeGestureState(),this.frame.addClass("annotator-no-transition"),this.frame.css("pointer-events","none"),this.gestureState.initial=parseInt(getComputedStyle(this.frame[0]).marginLeft);case"panend":return this.frame.removeClass("annotator-no-transition"),this.frame.css("pointer-events",""),this.gestureState.final<=-280?this.show():this.hide(),this._initializeGestureState();case"panleft":case"panright":if(null==this.gestureState.initial)return;return n=this.gestureState.initial,e=t.deltaX,this.gestureState.final=Math.min(Math.round(n+e),0),this._updateLayout()}},e.prototype.onSwipe=function(t){switch(t.type){case"swipeleft":return this.show();case"swiperight":return this.hide()}},e.prototype.show=function(){return this.crossframe.call("sidebarOpened"),this.frame&&(this.frame.css({"margin-left":-1*this.frame.width()+"px"}),this.frame.removeClass("annotator-collapsed")),this.toolbar.sidebarOpen=!0,"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!0),this._notifyOfLayoutChange(!0)},e.prototype.hide=function(){return this.frame&&(this.frame.css({"margin-left":""}),this.frame.addClass("annotator-collapsed")),this.toolbar.sidebarOpen=!1,"whenSidebarOpen"===this.options.showHighlights&&this.setVisibleHighlights(!1),this._notifyOfLayoutChange(!1)},e.prototype.isOpen=function(){return!this.frame||!this.frame.hasClass("annotator-collapsed")},e.prototype.setAllVisibleHighlights=function(t){return this.crossframe.call("setVisibleHighlights",t)},e}()},{"../shared/bridge-events":92,"./annotation-counts":51,"./features":60,"./host":64,"./sidebar-trigger":77,"./toolbar":79,hammerjs:32,jquery:"jquery"}],79:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ToolbarController=void 0;var r,o=t("preact"),i=(r=t("./components/toolbar"))&&r.__esModule?r:{default:r};function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=n.createAnnotation,s=n.setSidebarOpen,a=n.setHighlightsVisible;this._container=e,this._container.className="annotator-toolbar",this._useMinimalControls=!1,this._newAnnotationType="note",this._highlightsVisible=!1,this._sidebarOpen=!1,this._closeSidebar=function(){return s(!1)},this._toggleSidebar=function(){return s(!r._sidebarOpen)},this._toggleHighlights=function(){return a(!r._highlightsVisible)},this._createAnnotation=function(){i(),s(!0)},this._sidebarToggleButton=(0,o.createRef)(),this.render()}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"getWidth",value:function(){return this._container.getBoundingClientRect().width}},{key:"render",value:function(){(0,o.render)((0,o.createElement)(i.default,{closeSidebar:this._closeSidebar,createAnnotation:this._createAnnotation,newAnnotationType:this._newAnnotationType,isSidebarOpen:this._sidebarOpen,showHighlights:this._highlightsVisible,toggleHighlights:this._toggleHighlights,toggleSidebar:this._toggleSidebar,toggleSidebarRef:this._sidebarToggleButton,useMinimalControls:this.useMinimalControls}),this._container)}},{key:"useMinimalControls",set:function(t){this._useMinimalControls=t,this.render()},get:function(){return this._useMinimalControls}},{key:"sidebarOpen",set:function(t){this._sidebarOpen=t,this.render()},get:function(){return this._sidebarOpen}},{key:"newAnnotationType",set:function(t){this._newAnnotationType=t,this.render()},get:function(){return this._newAnnotationType}},{key:"highlightsVisible",set:function(t){this._highlightsVisible=t,this.render()},get:function(){return this._highlightsVisible}},{key:"sidebarToggleButton",get:function(){return this._sidebarToggleButton.current}}]),t}();n.ToolbarController=a},{"./components/toolbar":54,preact:35}],80:[function(t,e,n){"use strict";function r(t){var e=!t.classList.contains("h-sidebar-iframe"),n=t.hasAttribute("enable-annotation");return e&&n}Object.defineProperty(n,"__esModule",{value:!0}),n.findFrames=function(t){return Array.from(t.getElementsByTagName("iframe")).filter(r)},n.hasHypothesis=function(t){return!0===t.contentWindow.__hypothesis_frame},n.injectHypothesis=function(t,e,n){var r=document.createElement("script");r.className="js-hypothesis-config",r.type="application/json",r.innerText=JSON.stringify(n);var o=e,i=document.createElement("script");i.className="js-hypothesis-embed",i.async=!0,i.src=o,t.contentDocument.body.appendChild(r),t.contentDocument.body.appendChild(i)},n.isAccessible=function(t){try{return!!t.contentDocument}catch(t){return!1}},n.isDocumentReady=function(t,e){"loading"===t.contentDocument.readyState?t.contentDocument.addEventListener("DOMContentLoaded",(function(){e()})):e()},n.isLoaded=function(t,e){"complete"!==t.contentDocument.readyState?t.addEventListener("load",(function(){e()})):e()}},{}],81:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.listen=function(t,e){return new o.default((function(n){var r=function(t){n.next(t)};return e.forEach((function(e){t.addEventListener(e,r)})),function(){e.forEach((function(e){t.removeEventListener(e,r)}))}}))},n.delay=function(t,e){return new o.default((function(n){var r=[],o=e.subscribe({next:function(e){var o=setTimeout((function(){r=r.filter((function(t){return t!==o})),n.next(e)}),t);r.push(o)}});return function(){r.forEach(clearTimeout),o.unsubscribe()}}))},n.buffer=function(t,e){return new o.default((function(n){var r,o;function i(){n.next(r)}var s=e.subscribe({next:function(e){r=e,clearTimeout(o),o=setTimeout(i,t)}});return function(){s.unsubscribe(),clearTimeout(o)}}))},n.merge=function(t){return new o.default((function(e){var n=t.map((function(t){return t.subscribe({next:function(t){e.next(t)}})}));return function(){n.forEach((function(t){t.unsubscribe()}))}}))},n.drop=function(t,e){var n=0;return t.filter((function(){return++n>e}))},Object.defineProperty(n,"Observable",{enumerable:!0,get:function(){return o.default}});var r,o=(r=t("zen-observable"))&&r.__esModule?r:{default:r}},{"zen-observable":41}],82:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createShadowRoot=function(t){if(!t.attachShadow)return t;var e=t.attachShadow({mode:"open"});return function(t){var e=Array.from(document.styleSheets).map((function(t){return t.href})).filter((function(t){return(t||"").match(/annotator\.css/)})),n=document.createElement("style");n.textContent=e.map((function(t){return'@import "'.concat(t,'";')})).join("\n"),t.appendChild(n)}(e),e}},{}],83:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeURI=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default,n=new URL(t,e).href;return n.toString().replace(/#.*/,"")};var r,o=(r=t("document-base-uri"))&&r.__esModule?r:{default:r}},{"document-base-uri":5}],84:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path fill="currentColor" fill-rule="nonzero" d="M15 0c.27 0 .505.099.703.297A.961.961 0 0116 1v15l-4-3H1a.974.974 0 01-.703-.29A.953.953 0 010 12V1C0 .719.096.482.29.29A.966.966 0 011 0h14zM7 3l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C4.156 5.229 4 6 4 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188C4.729 8.854 5.082 9 5.5 9c.417 0 .77-.146 1.063-.438C6.854 8.271 7 7.918 7 7.5c0-.417-.146-.77-.438-1.063A1.447 1.447 0 005.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L7 4V3zm5 0l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C9.156 5.229 9 6 9 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188c.291.291.645.437 1.062.437.417 0 .77-.146 1.063-.438.291-.291.437-.645.437-1.062 0-.417-.146-.77-.438-1.063A1.447 1.447 0 0010.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L12 4V3z"/>\n</svg>\n'},{}],85:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false" class="Icon Icon--cancel"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 8l3.536-3.536L8 8 4.464 4.464 8 8zm0 0l-3.536 3.536L8 8l3.536 3.536L8 8z"></path></g></svg>\n'},{}],86:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 12L6 8l4-4"></path></g></svg>\n'},{}],87:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false" class="Icon Icon--caret-right"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 4l4 4-4 4"></path></g></svg>\n'},{}],88:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.73 12.973A9.89 9.89 0 0 1 8 13c-3.866 0-7-2.239-7-5 0-.753.233-1.467.65-2.107m5.62-2.866A9.89 9.89 0 0 1 8 3c3.866 0 7 2.239 7 5 0 .753-.233 1.467-.65 2.107M1 1l14 14L1 1z"></path></g></svg>\n'},{}],89:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path fill="currentColor" fill-rule="nonzero" d="M16 13.344V16H0v-2.656h16zM9.328 2.172l2.5 2.5-6.656 6.672h-2.5v-2.5l6.656-6.672zM11.773 0c.146 0 .277.043.393.13l.084.073 1.547 1.563a.603.603 0 01.203.46.639.639 0 01-.13.393l-.073.084L12.5 4 10 1.5 11.297.203A.652.652 0 0111.773 0z"/>\n</svg>\n'},{}],90:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 15h6l8-6V1H1v14zm6-1V9h7"></path></g></svg>\n'},{}],91:[function(t,e,n){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 13c3.866 0 7-2.239 7-5s-3.134-5-7-5-7 2.239-7 5 3.134 5 7 5zm0-4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></g></svg>\n'},{}],92:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={FEATURE_FLAGS_UPDATED:"featureFlagsUpdated",HELP_REQUESTED:"helpRequested",LOGIN_REQUESTED:"loginRequested",LOGOUT_REQUESTED:"logoutRequested",PROFILE_REQUESTED:"profileRequested",PUBLIC_ANNOTATION_COUNT_CHANGED:"publicAnnotationCountChanged",SIGNUP_REQUESTED:"signupRequested"}},{}],93:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./frame-rpc"))&&r.__esModule?r:{default:r};function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.links=[],this.channelListeners={},this.onConnectListeners=[]}return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(t,[{key:"destroy",value:function(){Array.from(this.links).map((function(t){return t.channel.destroy()}))}},{key:"createChannel",value:function(t,e,n){var r=this,i=null,s=!1,l=function(){s||(s=!0,Array.from(r.onConnectListeners).forEach((function(e){return e.call(null,i,t)})))},c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({connect:function(t,e){t===n&&(e(),l())}},this.channelListeners);return(i=new o.default(window,t,e,c)).call("connect",n,l),this.links.push({channel:i,window:t}),i}},{key:"call",value:function(t){for(var e,n=this,r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];"function"==typeof o[o.length-1]&&(e=o[o.length-1],o=o.slice(0,-1));var a=function(t){return function(e){throw t.destroy(),n.links=Array.from(n.links).filter((function(e){return e.channel!==t})).map((function(t){return t})),e}},u=this.links.map((function(e){return new Promise((function(n,r){var s=setTimeout((function(){return n(null)}),1e3);try{var a;return(a=e.channel).call.apply(a,[t].concat(i(Array.from(o)),[function(t,e){return clearTimeout(s),t?r(t):n(e)}]))}catch(t){return r(t)}})).catch(a(e.channel))})),l=Promise.all(u);return e&&(l=l.then((function(t){return e(null,t)})).catch((function(t){return e(t)}))),l}},{key:"on",value:function(t,e){if(this.channelListeners[t])throw new Error("Listener '".concat(t,"' already bound in Bridge"));return this.channelListeners[t]=e,this}},{key:"off",value:function(t){return delete this.channelListeners[t],this}},{key:"onConnect",value:function(t){return this.onConnectListeners.push(t),this}}]),t}();n.default=c},{"./frame-rpc":98}],94:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeKeyName=function(t){var e={Left:"ArrowLeft",Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Spacebar:" ",Del:"Delete"};return e[t]?e[t]:t}},{}],95:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c,n.registerIcons=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reset,r=void 0!==n&&n;r&&(l={}),Object.assign(l,t)},n.availableIcons=function(){return l};var r=a(t("classnames")),o=t("preact"),i=t("preact/hooks"),s=a(t("prop-types"));function a(t){return t&&t.__esModule?t:{default:t}}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var l={};function c(t){var e=t.name,n=t.className,s=void 0===n?"":n,a=t.inline,c=void 0!==a&&a,f=t.title,h=void 0===f?"":f;if(!l[e])throw new Error('Icon name "'.concat(e,'" is not registered'));var d={__html:l[e]},p=(0,i.useRef)();(0,i.useLayoutEffect)((function(){p.current.querySelector("svg").setAttribute("class",s)}),[s,d]);var g={};return h&&(g.title=h),(0,o.createElement)("span",u({className:(0,r.default)("svg-icon",{"svg-icon--inline":c}),dangerouslySetInnerHTML:d,ref:p},g))}c.propTypes={name:s.default.string,className:s.default.string,inline:s.default.bool,title:s.default.string}},{classnames:2,preact:35,"preact/hooks":36,"prop-types":38}],96:[function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.target=e,this.server=!1,this.origin="*",this.requestInProgress=!1,this.onDiscovery=null,void 0!==n.server&&(this.server=n.server),void 0!==n.origin&&(this.origin=n.origin),this._onMessage=this._onMessage.bind(this)}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"startDiscovery",value:function(t){if(this.onDiscovery)throw new Error("Discovery is already in progress. Call stopDiscovery() first");this.onDiscovery=t,this.target.addEventListener("message",this._onMessage,!1),this._beacon()}},{key:"stopDiscovery",value:function(){this.onDiscovery=null,this.target.removeEventListener("message",this._onMessage)}},{key:"_beacon",value:function(){var t;t=this.server?"__cross_frame_dhcp_offer":"__cross_frame_dhcp_discovery";for(var e=[this.target.top];e.length>0;){var n=e.shift();n!==this.target&&n.postMessage(t,this.origin);for(var r=0;r<n.frames.length;r++)e.push(n.frames[r])}}},{key:"_onMessage",value:function(t){var e=t.source,n=t.data,o=t.origin;("null"===o||o.match("moz-extension:")||"moz-extension:"===window.location.protocol)&&(o="*");var i="string"==typeof n&&n.match(/^__cross_frame_dhcp_(discovery|offer|request|ack)(?::(\d+))?$/);if(i){var s=r(i,3),a=s[1],u=s[2],l=this._processMessage(a,u,o),c=l.reply,f=l.discovered,h=l.token;c&&e.postMessage("__cross_frame_dhcp_"+c,o),f&&this.onDiscovery.call(null,e,o,h)}}},{key:"_processMessage",value:function(t,e,n){var r=null,o=!1;if(this.server){if("discovery"===t)r="offer";else if("request"===t)e=this.generateToken(),r="ack:".concat(e),o=!0;else if("offer"===t||"ack"===t)throw new Error("A second Discovery server has been detected at ".concat(n,".\n This is unsupported and will cause unexpected behaviour."))}else"offer"===t?this.requestInProgress||(this.requestInProgress=!0,r="request"):"ack"===t&&(this.requestInProgress=!1,o=!0);return{reply:r,discovered:o,token:e}}},{key:"generateToken",value:function(){return Math.random().toString().replace(/\D/g,"")}}]),t}();n.default=a},{}],97:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.closest=function(t,e){for(;t;){if(t.matches(e))return t;t=t.parentElement}return null}},{}],98:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;function o(t,e,n,i){if(!(this instanceof o))return new o(t,e,n,i);var s=this;if(this.src=t,this.dst=e,"*"===n)this.origin="*";else{var a=new URL(n);this.origin=a.protocol+"//"+a.host}this._sequence=0,this._callbacks={},this._onmessage=function(t){s._destroyed||s.dst===t.source&&("*"!==s.origin&&t.origin!==s.origin||t.data&&"object"===r(t.data)&&"frame-rpc"===t.data.protocol&&Array.isArray(t.data.arguments)&&s._handle(t.data))},this.src.addEventListener("message",this._onmessage),this._methods=("function"==typeof i?i(this):i)||{}}o.prototype.destroy=function(){this._destroyed=!0,this.src.removeEventListener("message",this._onmessage)},o.prototype.call=function(t){var e=[].slice.call(arguments,1);return this.apply(t,e)},o.prototype.apply=function(t,e){if(!this._destroyed){var n=this._sequence++;"function"==typeof e[e.length-1]&&(this._callbacks[n]=e[e.length-1],e=e.slice(0,-1)),this.dst.postMessage({protocol:"frame-rpc",version:"1.0.0",sequence:n,method:t,arguments:e},this.origin)}},o.prototype._handle=function(t){var e=this;if(!e._destroyed)if(t.hasOwnProperty("method")){if(!this._methods.hasOwnProperty(t.method))return;var n=t.arguments.concat((function(){e.dst.postMessage({protocol:"frame-rpc",version:"1.0.0",response:t.sequence,arguments:[].slice.call(arguments)},e.origin)}));this._methods[t.method].apply(this._methods,n)}else if(t.hasOwnProperty("response")){var r=this._callbacks[t.response];delete this._callbacks[t.response],r&&r.apply(null,t.arguments)}}},{}],99:[function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0}),n.jsonConfigsFrom=function(t){for(var e={},n=t.querySelectorAll("script.js-hypothesis-config"),o=0;o<n.length;o++){var i=void 0;try{i=JSON.parse(n[o].textContent)}catch(t){console.warn("Could not parse settings from js-hypothesis-config tags",t),i={}}r(e,i)}return e}},{}],100:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.matchShortcut=u,n.installShortcut=l,n.useShortcut=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.rootElement,i=void 0===o?document.body:o;(0,r.useEffect)((function(){return t?l(t,e,{rootElement:i}):null}),[t,e,i])};var r=t("preact/hooks"),o=t("./browser-compatibility-utils.js");function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a={alt:1,ctrl:2,meta:4,shift:8};function u(t,e){var n,r=0,s=null,u=i(e.split("+").map((function(t){return t.toLowerCase()})));try{for(u.s();!(n=u.n()).done;){var l=n.value,c=a[l];if(c)r|=c;else{if(null!==s)throw new Error("Multiple non-modifier keys specified");s=l}}}catch(t){u.e(t)}finally{u.f()}if(!s)throw new Error("Invalid shortcut: ".concat(e));return((t.ctrlKey&&a.ctrl)|(t.metaKey&&a.meta)|(t.altKey&&a.alt)|(t.shiftKey&&a.shift))===r&&(0,o.normalizeKeyName)(t.key).toLowerCase()===s}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.rootElement,o=void 0===r?document.body:r,i=function(n){u(n,t)&&e(n)};return o.addEventListener("keydown",i),function(){return o.removeEventListener("keydown",i)}}},{"./browser-compatibility-utils.js":94,"preact/hooks":36}],101:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.toBoolean=function(t){if("string"==typeof t&&"false"===t.trim().toLocaleLowerCase())return!1;var e=Number(t);return isNaN(e)?"string"==typeof t:Boolean(e)},n.toInteger=function(t){return parseInt(t)},n.toObject=function(t){return"object"===r(t)&&null!==t?t:{}},n.toString=function(t){return t&&"function"==typeof t.toString?t.toString():""}},{}],102:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r={};function o(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n.join();i in r||((t=console).warn.apply(t,n),r[i]=!0)}o.reset=function(){r={}}},{}]},{},[66]);
//# sourceMappingURL=annotator.bundle.js.map